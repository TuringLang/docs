<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Implementing samplers – Turing.jl</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../tutorials/docs-07-for-developers-variational-inference/index.html" rel="prev">
<link href="../../assets/favicon.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<style>
  a {
    text-decoration: none;
  }
  a:hover {
    text-decoration: underline;
  }
</style>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../theming/styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="https://turinglang.org/" class="navbar-brand navbar-brand-logo">
    <img src="../../assets/images/turing-logo.svg" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="https://turinglang.org/">
    <span class="navbar-title">Turing.jl</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../tutorials/docs-00-getting-started/"> 
<span class="menu-text">Get Started</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../tutorials/00-introduction/"> 
<span class="menu-text">Tutorials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://turinglang.org/library/"> 
<span class="menu-text">Libraries</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://turinglang.org/news/"> 
<span class="menu-text">News</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://turinglang.org/team/"> 
<span class="menu-text">Team</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-v0.32" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">v0.32</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-v0.32">    
        <li>
    <a class="dropdown-item" href="https://turinglang.org/docs/changelog.html">
 <span class="dropdown-text">Changelog</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://turinglang.org/docs/versions.html">
 <span class="dropdown-text">All Versions</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://x.com/TuringLang" title="Turing Twitter" class="quarto-navigation-tool px-1" aria-label="Turing Twitter"><i class="bi bi-twitter"></i></a>
    <a href="https://github.com/TuringLang/Turing.jl" title="Turing GitHub" class="quarto-navigation-tool px-1" aria-label="Turing GitHub"><i class="bi bi-github"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Documentation</li><li class="breadcrumb-item"><a href="../../tutorials/docs-04-for-developers-abstractmcmc-turing/index.html">For Developers (Inference)</a></li><li class="breadcrumb-item"><a href="../../tutorials/docs-17-implementing-samplers/index.html">Implementing Samplers</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Documentation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Using Turing - Modelling Syntax and Interface</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-00-getting-started/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Getting Started</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-14-using-turing-quick-start/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quick Start</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-12-using-turing-guide/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Guide</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-17-mode-estimation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mode Estimation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-09-using-turing-advanced/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Advanced Usage</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-10-using-turing-autodiff/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Automatic Differentiation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-13-using-turing-performance-tips/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Performance Tips</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-11-using-turing-dynamichmc/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using DynamicHMC</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-15-using-turing-sampler-viz/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sampler Visualization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-16-using-turing-external-samplers/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">External Samplers</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Using Turing - Tutorials</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/00-introduction/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Turing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/01-gaussian-mixture-model/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Gaussian Mixture Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/02-logistic-regression/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bayesian Logistic Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/03-bayesian-neural-network/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bayesian Neural Networks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/04-hidden-markov-model/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hidden Markov Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/05-linear-regression/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Linear Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/06-infinite-mixture-model/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Infinite Mixture Model</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/07-poisson-regression/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bayesian Poisson Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/08-multinomial-logistic-regression/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multinomial Logistic Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/09-variational-inference/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Variational Inference</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/10-bayesian-differential-equations/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bayesian Differential Equations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/11-probabilistic-pca/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Probabilistic PCA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/13-seasonal-time-series/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bayesian Time Series Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/15-gaussian-processes/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Gaussian Processes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/12-gplvm/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Gaussian Process Latent Variable Models</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">For Developers (PPL)</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-01-contributing-guide/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Contribute</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-05-for-developers-compiler/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Turing Compiler Design</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/14-minituring/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">A Mini Turing Implementation I: Compiler</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/16-contexts/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">A Mini Turing Implementation II: Contexts</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-06-for-developers-interface/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Interface Guide</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">For Developers (Inference)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-04-for-developers-abstractmcmc-turing/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How Turing implements AbstractMCMC</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-07-for-developers-variational-inference/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Variational Inference</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-17-implementing-samplers/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Implementing Samplers</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#quick-overview-of-mala" id="toc-quick-overview-of-mala" class="nav-link active" data-scroll-target="#quick-overview-of-mala">Quick overview of MALA</a></li>
  <li><a href="#what-we-need-from-a-model-logdensityproblems.jl" id="toc-what-we-need-from-a-model-logdensityproblems.jl" class="nav-link" data-scroll-target="#what-we-need-from-a-model-logdensityproblems.jl">What we need from a model: LogDensityProblems.jl</a></li>
  <li><a href="#implementing-mala-in-abstractmcmc.jl" id="toc-implementing-mala-in-abstractmcmc.jl" class="nav-link" data-scroll-target="#implementing-mala-in-abstractmcmc.jl">Implementing MALA in AbstractMCMC.jl</a></li>
  <li><a href="#using-our-sampler-with-turing.jl" id="toc-using-our-sampler-with-turing.jl" class="nav-link" data-scroll-target="#using-our-sampler-with-turing.jl">Using our sampler with Turing.jl</a>
  <ul class="collapse">
  <li><a href="#models-with-constrained-parameters" id="toc-models-with-constrained-parameters" class="nav-link" data-scroll-target="#models-with-constrained-parameters">Models with constrained parameters</a></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/TuringLang/docs/edit/master/tutorials/docs-17-implementing-samplers/index.qmd" target="_blank" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/TuringLang/docs/issues/new" target="_blank" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Documentation</li><li class="breadcrumb-item"><a href="../../tutorials/docs-04-for-developers-abstractmcmc-turing/index.html">For Developers (Inference)</a></li><li class="breadcrumb-item"><a href="../../tutorials/docs-17-implementing-samplers/index.html">Implementing Samplers</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Implementing samplers</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>In this tutorial, we’ll go through step-by-step how to implement a “simple” sampler in <a href="https://github.com/TuringLang/AbstractMCMC.jl">AbstractMCMC.jl</a> in such a way that it can be easily applied to Turing.jl models.</p>
<p>In particular, we’re going to implement a version of <strong>Metropolis-adjusted Langevin (MALA)</strong>.</p>
<p>Note that we will implement this sampler in the <a href="https://github.com/TuringLang/AbstractMCMC.jl">AbstractMCMC.jl</a> framework, completely “ignoring” Turing.jl until the very end of the tutorial, at which point we’ll use a single line of code to make the resulting sampler available to Turing.jl. This is to really drive home the point that one can implement samplers in a way that is accessible to all of Turing.jl’s users without having to use Turing.jl yourself.</p>
<section id="quick-overview-of-mala" class="level2">
<h2 class="anchored" data-anchor-id="quick-overview-of-mala">Quick overview of MALA</h2>
<p>We can view MALA as a single step of the leapfrog intergrator with resampling of momentum <span class="math inline">\(p\)</span> at every step.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> To make that statement a bit more concrete, we first define the <em>extended</em> target <span class="math inline">\(\bar{\gamma}(x, p)\)</span> as</p>
<p><span class="math display">\[\begin{equation*}
\log \bar{\gamma}(x, p) \propto \log \gamma(x) + \log \gamma_{\mathcal{N}(0, M)}(p)
\end{equation*}\]</span></p>
<p>where <span class="math inline">\(\gamma_{\mathcal{N}(0, M)}\)</span> denotes the density for a zero-centered Gaussian with covariance matrix <span class="math inline">\(M\)</span>. We then consider targeting this joint distribution over both <span class="math inline">\(x\)</span> and <span class="math inline">\(p\)</span> as follows. First we define the map</p>
<p><span class="math display">\[\begin{equation*}
\begin{split}
  L_{\epsilon}: \quad &amp; \mathbb{R}^d \times \mathbb{R}^d \to \mathbb{R}^d \times \mathbb{R}^d \\
  &amp; (x, p) \mapsto (\tilde{x}, \tilde{p}) := L_{\epsilon}(x, p)
\end{split}
\end{equation*}\]</span></p>
<p>as</p>
<p><span class="math display">\[\begin{equation*}
\begin{split}
  p_{1 / 2} &amp;:= p + \frac{\epsilon}{2} \nabla \log \gamma(x) \\
  \tilde{x} &amp;:= x + \epsilon M^{-1} p_{1 /2 } \\
  p_1 &amp;:= p_{1 / 2} + \frac{\epsilon}{2} \nabla \log \gamma(\tilde{x}) \\
  \tilde{p} &amp;:= - p_1
\end{split}
\end{equation*}\]</span></p>
<p>This might be familiar for some readers as a single step of the Leapfrog integrator. We then define the MALA kernel as follows: given the current iterate <span class="math inline">\(x_i\)</span>, we sample the next iterate <span class="math inline">\(x_{i + 1}\)</span> as</p>
<p><span class="math display">\[\begin{equation*}
\begin{split}
  p &amp;\sim \mathcal{N}(0, M) \\
  (\tilde{x}, \tilde{p}) &amp;:= L_{\epsilon}(x_i, p) \\
  \alpha &amp;:= \min \left\{ 1, \frac{\bar{\gamma}(\tilde{x}, \tilde{p})}{\bar{\gamma}(x_i, p)} \right\} \\
  x_{i + 1} &amp;:=
  \begin{cases}
    \tilde{x} \quad &amp; \text{ with prob. } \alpha \\
    x_i       \quad &amp; \text{ with prob. } 1 - \alpha
  \end{cases}
\end{split}
\end{equation*}\]</span></p>
<p>i.e.&nbsp;we accept the proposal <span class="math inline">\(\tilde{x}\)</span> with probability <span class="math inline">\(\alpha\)</span> and reject it, thus sticking with our current iterate, with probability <span class="math inline">\(1 - \alpha\)</span>.</p>
</section>
<section id="what-we-need-from-a-model-logdensityproblems.jl" class="level2">
<h2 class="anchored" data-anchor-id="what-we-need-from-a-model-logdensityproblems.jl">What we need from a model: <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a></h2>
<p>There are a few things we need from the “target” / “model” / density that we want to sample from:</p>
<ol type="1">
<li>We need access to log-density <em>evaluations</em> <span class="math inline">\(\log \gamma(x)\)</span> so we can compute the acceptance ratio involving <span class="math inline">\(\log \bar{\gamma}(x, p)\)</span>.</li>
<li>We need access to log-density <em>gradients</em> <span class="math inline">\(\nabla \log \gamma(x)\)</span> so we can compute the Leapfrog steps <span class="math inline">\(L_{\epsilon}(x, p)\)</span>.</li>
<li>We also need access to the “size” of the model so we can determine the size of <span class="math inline">\(M\)</span>.</li>
</ol>
<p>Luckily for us, there is a package called <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a> which provides an interface for <em>exactly</em> this!</p>
<p>To demonstrate how one can implement the “<a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a> interface”<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> we will use a simple Gaussian model as an example:</p>
<div id="4" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">LogDensityProblems</span>: LogDensityProblems;</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's define some type that represents the model.</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> IsotropicNormalModel{M<span class="op">&lt;:</span><span class="dt">AbstractVector{&lt;:Real}</span>}</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"mean of the isotropic Gaussian"</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    mean<span class="op">::</span><span class="dt">M</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Specifies what input length the model expects.</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>LogDensityProblems.<span class="fu">dimension</span>(model<span class="op">::</span><span class="dt">IsotropicNormalModel</span>) <span class="op">=</span> <span class="fu">length</span>(model.mean)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Implementation of the log-density evaluation of the model.</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> LogDensityProblems.<span class="fu">logdensity</span>(model<span class="op">::</span><span class="dt">IsotropicNormalModel</span>, x<span class="op">::</span><span class="dt">AbstractVector{&lt;:Real}</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span> <span class="fu">sum</span>(abs2, x <span class="op">.-</span> model.mean) <span class="op">/</span> <span class="fl">2</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This gives us all of the properties we want for our MALA sampler with the exception of the computation of the <em>gradient</em> <span class="math inline">\(\nabla \log \gamma(x)\)</span>. There is the method <code>LogDensityProblems.logdensity_and_gradient</code> which should return a 2-tuple where the first entry is the evaluation of the logdensity <span class="math inline">\(\log \gamma(x)\)</span> and the second entry is the gradient <span class="math inline">\(\nabla \log \gamma(x)\)</span>.</p>
<p>There are two ways to “implement” this method: 1) we implement it by hand, which is feasible in the case of our <code>IsotropicNormalModel</code>, or b) we defer the implementation of this to a automatic differentiation backend.</p>
<p>To implement it by hand we can simply do</p>
<div id="6" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tell LogDensityProblems.jl that first-order, i.e. gradient information, is available.</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>LogDensityProblems.<span class="fu">capabilities</span>(model<span class="op">::</span><span class="dt">IsotropicNormalModel</span>) <span class="op">=</span> LogDensityProblems.<span class="fu">LogDensityOrder</span><span class="dt">{1}</span>()</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Implement `logdensity_and_gradient`.</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> LogDensityProblems.<span class="fu">logdensity_and_gradient</span>(model<span class="op">::</span><span class="dt">IsotropicNormalModel</span>, x)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    logγ_x <span class="op">=</span> LogDensityProblems.<span class="fu">logdensity</span>(model, x)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    ∇logγ_x <span class="op">=</span> <span class="op">-</span>x <span class="op">.*</span> (x <span class="op">-</span> model.mean)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> logγ_x, ∇logγ_x</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s just try it out:</p>
<div id="8" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Instantiate the problem.</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> <span class="fu">IsotropicNormalModel</span>([<span class="op">-</span><span class="fl">5</span>., <span class="fl">0</span>., <span class="fl">5</span>.])</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create some example input that we can test on.</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>x_example <span class="op">=</span> <span class="fu">randn</span>(LogDensityProblems.<span class="fu">dimension</span>(model))</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluate!</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>LogDensityProblems.<span class="fu">logdensity</span>(model, x_example)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>-34.371327623094416</code></pre>
</div>
</div>
<p>To defer it to an automatic differentiation backend, we can do</p>
<div id="10" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tell LogDensityProblems.jl we only have access to 0-th order information.</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>LogDensityProblems.<span class="fu">capabilities</span>(model<span class="op">::</span><span class="dt">IsotropicNormalModel</span>) <span class="op">=</span> LogDensityProblems.<span class="fu">LogDensityOrder</span><span class="dt">{0}</span>()</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Use `LogDensityProblemsAD`'s `ADgradient` in combination with some AD backend to implement `logdensity_and_gradient`.</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">LogDensityProblemsAD</span>, <span class="bu">ADTypes</span>, <span class="bu">ForwardDiff</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>model_with_grad <span class="op">=</span> <span class="fu">ADgradient</span>(<span class="fu">AutoForwardDiff</span>(), model)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>LogDensityProblems.<span class="fu">logdensity</span>(model_with_grad, x_example)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>-34.371327623094416</code></pre>
</div>
</div>
<p>We’ll continue with the second approach in this tutorial since this is typically what one does in practice, because there are better hobbies to spend time on than deriving gradients by hand.</p>
<p>At this point, one might wonder how we’re going to tie this back to Turing.jl in the end. Effectively, when working with inference methods that only require log-density evaluations and / or higher-order information of the log-density, Turing.jl actually converts the user-provided <code>Model</code> into an object implementing the above methods for <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a>. As a result, most samplers provided by Turing.jl are actually implemented to work with <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a>, enabling their use both <em>within</em> Turing.jl and <em>outside</em> of Turing.jl! Morever, there exists similar conversions for Stan through BridgeStan and Stan<a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a>, which means that a sampler supporting the <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a> interface can easily be used on both Turing.jl <em>and</em> Stan models (in addition to user-provided models, as our <code>IsotropicNormalModel</code> above)!</p>
<p>Anyways, let’s move on to actually implementing the sampler.</p>
</section>
<section id="implementing-mala-in-abstractmcmc.jl" class="level2">
<h2 class="anchored" data-anchor-id="implementing-mala-in-abstractmcmc.jl">Implementing MALA in <a href="https://github.com/TuringLang/AbstractMCMC.jl">AbstractMCMC.jl</a></h2>
<p>Now that we’ve established that a model implementing the <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a> interface provides us with all the information we need from <span class="math inline">\(\log \gamma(x)\)</span>, we can address the question: given an object that implements the <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a> interface, how can we define a sampler for it?</p>
<p>We’re going to do this by making our sampler a sub-type of <code>AbstractMCMC.AbstractSampler</code> in addition to implementing a few methods from <a href="https://github.com/TuringLang/AbstractMCMC.jl">AbstractMCMC.jl</a>. Why? Because it gets us <em>a lot</em> of functionality for free, as we will see later.</p>
<p>Moreover, <a href="https://github.com/TuringLang/AbstractMCMC.jl">AbstractMCMC.jl</a> provides a very natural interface for MCMC algorithms.</p>
<p>First, we’ll define our <code>MALA</code> type</p>
<div id="12" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">AbstractMCMC</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> MALA{T,A} <span class="op">&lt;:</span><span class="dt"> AbstractMCMC.AbstractSampler</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"stepsize used in the leapfrog step"</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    ϵ_init<span class="op">::</span><span class="dt">T</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"covariance matrix used for the momentum"</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    M_init<span class="op">::</span><span class="dt">A</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Notice how we’ve added the suffix <code>_init</code> to both the stepsize and the covariance matrix. We’ve done this because a <code>AbstractMCMC.AbstractSampler</code> should be <em>immutable</em>. Of course there might be many scenarios where we want to allow something like the stepsize and / or the covariance matrix to vary between iterations, e.g.&nbsp;during the burn-in / adaptation phase of the sampling process we might want to adjust the parameters using statistics computed from these initial iterations. But information which can change between iterations <em>should not go in the sampler itself</em>! Instead, this information should go in the sampler <em>state</em>.</p>
<p>The sampler state should at the very least contain all the necessary information to perform the next MCMC iteration, but usually contains further information, e.g.&nbsp;quantities and statistics useful for evaluating whether the sampler has converged.</p>
<p>We will use the following sampler state for our <code>MALA</code> sampler:</p>
<div id="14" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> MALAState{A<span class="op">&lt;:</span><span class="dt">AbstractVector{&lt;:Real}</span>}</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"current position"</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    x<span class="op">::</span><span class="dt">A</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This might seem overly redundant: we’re defining a type <code>MALAState</code> and it only contains a simple vector of reals. In this particular case we indeed could have dropped this and simply used a <code>AbstractVector{&lt;:Real}</code> as our sampler state, but typically, as we will see later, one wants to include other quantities in the sampler state. For example, if we also wanted to adapt the parameters of our <code>MALA</code>, e.g.&nbsp;alter the stepsize depending on acceptance rates, in which case we should also put <code>ϵ</code> in the state, but for now we’ll keep things simple.</p>
<p>Moreover, we also want a <em>sample</em> type, which is a type meant for “public consumption”, i.e.&nbsp;the end-user. This is generally going to contain a subset of the information present in the state. But in such a simple scenario as this, we similarly only have a <code>AbstractVector{&lt;:Real}</code>:</p>
<div id="16" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> MALASample{A<span class="op">&lt;:</span><span class="dt">AbstractVector{&lt;:Real}</span>}</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"current position"</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    x<span class="op">::</span><span class="dt">A</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We currently have three things:</p>
<ol type="1">
<li>A <code>AbstractMCMC.AbstractSampler</code> implementation called <code>MALA</code>.</li>
<li>A state <code>MALAState</code> for our sampler <code>MALA</code>.</li>
<li>A sample <code>MALASample</code> for our sampler <code>MALA</code>.</li>
</ol>
<p>That means that we’re ready to implement the only thing that really matters: <code>AbstractMCMC.step</code>.</p>
<p><code>AbstractMCMC.step</code> defines the MCMC iteration of our <code>MALA</code> given the current <code>MALAState</code>. Specifically, the signature of the function is as follows:</p>
<div id="18" class="cell" data-execution_count="0">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> AbstractMCMC.<span class="fu">step</span>(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The RNG to ensure reproducibility.</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    rng<span class="op">::</span><span class="dt">Random.AbstractRNG</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The model that defines our target.</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    model<span class="op">::</span><span class="dt">AbstractMCMC.AbstractModel</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The sampler for which we're taking a `step`.</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    sampler<span class="op">::</span><span class="dt">AbstractMCMC.AbstractSampler</span>,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The current sampler `state`.</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    state;</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Additional keyword arguments that we may or may not need.</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    kwargs<span class="op">...</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Moreover, there is a specific <code>AbstractMCMC.AbstractModel</code> which is used to indicate that the model that is provided implements the <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a> interface: <code>AbstractMCMC.LogDensityModel</code>.</p>
<p>Since, as we discussed earlier, in our case we’re indeed going to work with types that support the <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a> interface, we’ll define <code>AbstractMCMC.step</code> for such a <code>AbstractMCMC.LogDensityModel</code>.</p>
<p>Note that <code>AbstractMCMC.LogDensityModel</code> has no other purpose; it has a single field called <code>logdensity</code>, and it does nothing else. But by wrapping the model in <code>AbstractMCMC.LogDensityModel</code>, it allows samplers that want to work with <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a> to define their <code>AbstractMCMC.step</code> on this type without running into method ambiguities.</p>
<p>All in all, that means that the signature for our <code>AbstractMCMC.step</code> is going to be the following:</p>
<div id="20" class="cell" data-execution_count="0">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> AbstractMCMC.<span class="fu">step</span>(</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    rng<span class="op">::</span><span class="dt">Random.AbstractRNG</span>,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># `LogDensityModel` so we know we're working with LogDensityProblems.jl model.</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    model<span class="op">::</span><span class="dt">AbstractMCMC.LogDensityModel</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Our sampler.</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    sampler<span class="op">::</span><span class="dt">MALA</span>,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Our sampler state.</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    state<span class="op">::</span><span class="dt">MALAState</span>;</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    kwargs<span class="op">...</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Great! Now let’s actually implement the full <code>AbstractMCMC.step</code> for our <code>MALA</code>.</p>
<p>Let’s remind ourselves what we’re going to do:</p>
<ol type="1">
<li>Sample a new momentum <span class="math inline">\(p\)</span>.</li>
<li>Compute the log-density of the extended target <span class="math inline">\(\log \bar{\gamma}(x, p)\)</span>.</li>
<li>Take a single leapfrog step <span class="math inline">\((\tilde{x}, \tilde{p}) = L_{\epsilon}(x, p)\)</span>.</li>
<li>Accept or reject the proposed <span class="math inline">\((\tilde{x}, \tilde{p})\)</span>.</li>
</ol>
<p>All in all, this results in the following:</p>
<div id="22" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Random</span>: Random</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Distributions</span>  <span class="co"># so we get the `MvNormal`</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> AbstractMCMC.<span class="fu">step</span>(</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    rng<span class="op">::</span><span class="dt">Random.AbstractRNG</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    model_wrapper<span class="op">::</span><span class="dt">AbstractMCMC.LogDensityModel</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    sampler<span class="op">::</span><span class="dt">MALA</span>,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    state<span class="op">::</span><span class="dt">MALAState</span>;</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    kwargs<span class="op">...</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract the wrapped model which implements LogDensityProblems.jl.</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> model_wrapper.logdensity</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Let's just extract the sampler parameters to make our lives easier.</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    ϵ <span class="op">=</span> sampler.ϵ_init</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    M <span class="op">=</span> sampler.M_init</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract the current parameters.</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> state.x</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sample the momentum.</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    p_dist <span class="op">=</span> <span class="fu">MvNormal</span>(<span class="fu">zeros</span>(LogDensityProblems.<span class="fu">dimension</span>(model)), M)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="fu">rand</span>(rng, p_dist)</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Propose using a single leapfrog step.</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    x̃, p̃ <span class="op">=</span> <span class="fu">leapfrog_step</span>(model, x, p, ϵ, M)</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Accept or reject proposal.</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>    logp <span class="op">=</span> LogDensityProblems.<span class="fu">logdensity</span>(model, x) <span class="op">+</span> <span class="fu">logpdf</span>(p_dist, p)</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    logp̃ <span class="op">=</span> LogDensityProblems.<span class="fu">logdensity</span>(model, x̃) <span class="op">+</span> <span class="fu">logpdf</span>(p_dist, p̃)</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    logα <span class="op">=</span> logp̃ <span class="op">-</span> logp</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>    state_new <span class="op">=</span> <span class="cf">if</span> <span class="fu">log</span>(<span class="fu">rand</span>(rng)) <span class="op">&lt;</span> logα</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Accept.</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>        <span class="fu">MALAState</span>(x̃)</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Reject.</span></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>        <span class="fu">MALAState</span>(x)</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Return the "sample" and the sampler state.</span></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">MALASample</span>(state_new.x), state_new</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Fairly straight-forward.</p>
<p>Of course, we haven’t defined the <code>leapfrog_step</code> method yet, so let’s do that:</p>
<div id="24" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">leapfrog_step</span>(model, x, p, ϵ, M)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Update momentum `p` using "position" `x`.</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    ∇logγ_x <span class="op">=</span> <span class="fu">last</span>(LogDensityProblems.<span class="fu">logdensity_and_gradient</span>(model, x))</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    p1 <span class="op">=</span> p <span class="op">+</span> (ϵ <span class="op">/</span> <span class="fl">2</span>) <span class="op">.*</span> ∇logγ_x</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Update the "position" `x` using momentum `p1`.</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    x̃ <span class="op">=</span> x <span class="op">+</span> ϵ <span class="op">.*</span> (M <span class="op">\</span> p1)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Update momentum `p1` using position `x̃`</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    ∇logγ_x̃ <span class="op">=</span> <span class="fu">last</span>(LogDensityProblems.<span class="fu">logdensity_and_gradient</span>(model, x̃))</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    p2 <span class="op">=</span> p1 <span class="op">+</span> (ϵ <span class="op">/</span> <span class="fl">2</span>) <span class="op">.*</span> ∇logγ_x̃</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Flip momentum `p2`.</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    p̃ <span class="op">=</span> <span class="op">-</span>p2</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x̃, p̃</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>leapfrog_step (generic function with 1 method)</code></pre>
</div>
</div>
<p>With all of this, we’re technically ready to sample!</p>
<div id="26" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Random</span>, <span class="bu">LinearAlgebra</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>rng <span class="op">=</span> <span class="bu">Random</span>.<span class="fu">default_rng</span>()</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>sampler <span class="op">=</span> <span class="fu">MALA</span>(<span class="fl">1</span>, I)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>state <span class="op">=</span> <span class="fu">MALAState</span>(<span class="fu">zeros</span>(LogDensityProblems.<span class="fu">dimension</span>(model)))</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>x_next, state_next <span class="op">=</span> AbstractMCMC.<span class="fu">step</span>(</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    rng,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    AbstractMCMC.<span class="fu">LogDensityModel</span>(model),</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    sampler,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    state</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(MALASample{Vector{Float64}}([-0.936593228891474, 0.4998719587653741, -0.19291876128705485]), MALAState{Vector{Float64}}([-0.936593228891474, 0.4998719587653741, -0.19291876128705485]))</code></pre>
</div>
</div>
<p>Great, it works!</p>
<p>And I promised we would get quite some functionality for free if we implemented <code>AbstractMCMC.step</code>, and so we can now simply call <code>sample</code> to perform standard MCMC sampling:</p>
<div id="28" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform 1000 iterations with our `MALA` sampler.</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>samples <span class="op">=</span> <span class="fu">sample</span>(model_with_grad, sampler, <span class="fl">10_000</span>; initial_state<span class="op">=</span>state, progress<span class="op">=</span><span class="cn">false</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Concatenate into a matrix.</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>samples_matrix <span class="op">=</span> <span class="fu">stack</span>(sample <span class="op">-&gt;</span> sample.x, samples)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3×10000 Matrix{Float64}:
 -0.778343  -3.2475   -4.33208      …  -6.68052   -7.18796   -4.47508
  1.11301   -1.67786  -0.000688871      0.256393   0.693724  -0.0549511
  2.32573    3.9619    4.99928          4.95339    3.413      5.01618</code></pre>
</div>
</div>
<div id="30" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the marginal means and standard deviations.</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hcat</span>(<span class="fu">mean</span>(samples_matrix; dims<span class="op">=</span><span class="fl">2</span>), <span class="fu">std</span>(samples_matrix; dims<span class="op">=</span><span class="fl">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3×2 Matrix{Float64}:
 -5.03008      0.995459
  0.000150618  0.99651
  4.97537      1.02223</code></pre>
</div>
</div>
<p>Let’s visualize the samples</p>
<div id="32" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">StatsPlots</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">transpose</span>(samples_matrix[<span class="op">:</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">:</span><span class="kw">end</span>]), alpha<span class="op">=</span><span class="fl">0.5</span>, legend<span class="op">=</span><span class="cn">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<!--?xml version="1.0" encoding="utf-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="672" height="480" viewbox="0 0 2688 1920">
<defs>
  <clippath id="clip450">
    <rect x="0" y="0" width="2688" height="1920"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip450)" d="M0 1920 L2688 1920 L2688 0 L0 0  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip451">
    <rect x="537" y="0" width="1883" height="1883"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip450)" d="M196.816 1800.78 L2640.76 1800.78 L2640.76 47.2441 L196.816 47.2441  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip452">
    <rect x="196" y="47" width="2445" height="1755"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip452)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.676,1800.78 263.676,47.2441 "></polyline>
<polyline clip-path="url(#clip452)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="840.654,1800.78 840.654,47.2441 "></polyline>
<polyline clip-path="url(#clip452)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1417.63,1800.78 1417.63,47.2441 "></polyline>
<polyline clip-path="url(#clip452)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1994.61,1800.78 1994.61,47.2441 "></polyline>
<polyline clip-path="url(#clip452)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2571.59,1800.78 2571.59,47.2441 "></polyline>
<polyline clip-path="url(#clip450)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="196.816,1800.78 2640.76,1800.78 "></polyline>
<polyline clip-path="url(#clip450)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.676,1800.78 263.676,1781.88 "></polyline>
<polyline clip-path="url(#clip450)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="840.654,1800.78 840.654,1781.88 "></polyline>
<polyline clip-path="url(#clip450)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1417.63,1800.78 1417.63,1781.88 "></polyline>
<polyline clip-path="url(#clip450)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1994.61,1800.78 1994.61,1781.88 "></polyline>
<polyline clip-path="url(#clip450)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2571.59,1800.78 2571.59,1781.88 "></polyline>
<path clip-path="url(#clip450)" d="M263.676 1834 Q260.065 1834 258.236 1837.57 Q256.431 1841.11 256.431 1848.24 Q256.431 1855.34 258.236 1858.91 Q260.065 1862.45 263.676 1862.45 Q267.31 1862.45 269.116 1858.91 Q270.945 1855.34 270.945 1848.24 Q270.945 1841.11 269.116 1837.57 Q267.31 1834 263.676 1834 M263.676 1830.3 Q269.486 1830.3 272.542 1834.9 Q275.621 1839.49 275.621 1848.24 Q275.621 1856.96 272.542 1861.57 Q269.486 1866.15 263.676 1866.15 Q257.866 1866.15 254.787 1861.57 Q251.732 1856.96 251.732 1848.24 Q251.732 1839.49 254.787 1834.9 Q257.866 1830.3 263.676 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M804.346 1861.55 L820.666 1861.55 L820.666 1865.48 L798.721 1865.48 L798.721 1861.55 Q801.383 1858.79 805.967 1854.16 Q810.573 1849.51 811.754 1848.17 Q813.999 1845.65 814.879 1843.91 Q815.782 1842.15 815.782 1840.46 Q815.782 1837.71 813.837 1835.97 Q811.916 1834.23 808.814 1834.23 Q806.615 1834.23 804.161 1835 Q801.731 1835.76 798.953 1837.31 L798.953 1832.59 Q801.777 1831.46 804.231 1830.88 Q806.684 1830.3 808.721 1830.3 Q814.092 1830.3 817.286 1832.98 Q820.481 1835.67 820.481 1840.16 Q820.481 1842.29 819.67 1844.21 Q818.883 1846.11 816.777 1848.7 Q816.198 1849.37 813.096 1852.59 Q809.995 1855.78 804.346 1861.55 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M830.527 1830.92 L848.883 1830.92 L848.883 1834.86 L834.809 1834.86 L834.809 1843.33 Q835.828 1842.98 836.846 1842.82 Q837.865 1842.64 838.883 1842.64 Q844.67 1842.64 848.05 1845.81 Q851.43 1848.98 851.43 1854.4 Q851.43 1859.97 847.957 1863.08 Q844.485 1866.15 838.166 1866.15 Q835.99 1866.15 833.721 1865.78 Q831.476 1865.41 829.069 1864.67 L829.069 1859.97 Q831.152 1861.11 833.374 1861.66 Q835.596 1862.22 838.073 1862.22 Q842.078 1862.22 844.416 1860.11 Q846.754 1858.01 846.754 1854.4 Q846.754 1850.78 844.416 1848.68 Q842.078 1846.57 838.073 1846.57 Q836.198 1846.57 834.323 1846.99 Q832.471 1847.4 830.527 1848.28 L830.527 1830.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M870.642 1834 Q867.031 1834 865.203 1837.57 Q863.397 1841.11 863.397 1848.24 Q863.397 1855.34 865.203 1858.91 Q867.031 1862.45 870.642 1862.45 Q874.277 1862.45 876.082 1858.91 Q877.911 1855.34 877.911 1848.24 Q877.911 1841.11 876.082 1837.57 Q874.277 1834 870.642 1834 M870.642 1830.3 Q876.453 1830.3 879.508 1834.9 Q882.587 1839.49 882.587 1848.24 Q882.587 1856.96 879.508 1861.57 Q876.453 1866.15 870.642 1866.15 Q864.832 1866.15 861.754 1861.57 Q858.698 1856.96 858.698 1848.24 Q858.698 1839.49 861.754 1834.9 Q864.832 1830.3 870.642 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M1377.25 1830.92 L1395.61 1830.92 L1395.61 1834.86 L1381.53 1834.86 L1381.53 1843.33 Q1382.55 1842.98 1383.57 1842.82 Q1384.59 1842.64 1385.61 1842.64 Q1391.39 1842.64 1394.77 1845.81 Q1398.15 1848.98 1398.15 1854.4 Q1398.15 1859.97 1394.68 1863.08 Q1391.21 1866.15 1384.89 1866.15 Q1382.71 1866.15 1380.44 1865.78 Q1378.2 1865.41 1375.79 1864.67 L1375.79 1859.97 Q1377.88 1861.11 1380.1 1861.66 Q1382.32 1862.22 1384.8 1862.22 Q1388.8 1862.22 1391.14 1860.11 Q1393.48 1858.01 1393.48 1854.4 Q1393.48 1850.78 1391.14 1848.68 Q1388.8 1846.57 1384.8 1846.57 Q1382.92 1846.57 1381.05 1846.99 Q1379.19 1847.4 1377.25 1848.28 L1377.25 1830.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M1417.37 1834 Q1413.75 1834 1411.93 1837.57 Q1410.12 1841.11 1410.12 1848.24 Q1410.12 1855.34 1411.93 1858.91 Q1413.75 1862.45 1417.37 1862.45 Q1421 1862.45 1422.81 1858.91 Q1424.63 1855.34 1424.63 1848.24 Q1424.63 1841.11 1422.81 1837.57 Q1421 1834 1417.37 1834 M1417.37 1830.3 Q1423.18 1830.3 1426.23 1834.9 Q1429.31 1839.49 1429.31 1848.24 Q1429.31 1856.96 1426.23 1861.57 Q1423.18 1866.15 1417.37 1866.15 Q1411.56 1866.15 1408.48 1861.57 Q1405.42 1856.96 1405.42 1848.24 Q1405.42 1839.49 1408.48 1834.9 Q1411.56 1830.3 1417.37 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M1447.53 1834 Q1443.92 1834 1442.09 1837.57 Q1440.28 1841.11 1440.28 1848.24 Q1440.28 1855.34 1442.09 1858.91 Q1443.92 1862.45 1447.53 1862.45 Q1451.16 1862.45 1452.97 1858.91 Q1454.8 1855.34 1454.8 1848.24 Q1454.8 1841.11 1452.97 1837.57 Q1451.16 1834 1447.53 1834 M1447.53 1830.3 Q1453.34 1830.3 1456.39 1834.9 Q1459.47 1839.49 1459.47 1848.24 Q1459.47 1856.96 1456.39 1861.57 Q1453.34 1866.15 1447.53 1866.15 Q1441.72 1866.15 1438.64 1861.57 Q1435.58 1856.96 1435.58 1848.24 Q1435.58 1839.49 1438.64 1834.9 Q1441.72 1830.3 1447.53 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M1952.89 1830.92 L1975.11 1830.92 L1975.11 1832.91 L1962.56 1865.48 L1957.68 1865.48 L1969.48 1834.86 L1952.89 1834.86 L1952.89 1830.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M1984.27 1830.92 L2002.63 1830.92 L2002.63 1834.86 L1988.56 1834.86 L1988.56 1843.33 Q1989.58 1842.98 1990.59 1842.82 Q1991.61 1842.64 1992.63 1842.64 Q1998.42 1842.64 2001.8 1845.81 Q2005.18 1848.98 2005.18 1854.4 Q2005.18 1859.97 2001.7 1863.08 Q1998.23 1866.15 1991.91 1866.15 Q1989.74 1866.15 1987.47 1865.78 Q1985.22 1865.41 1982.82 1864.67 L1982.82 1859.97 Q1984.9 1861.11 1987.12 1861.66 Q1989.34 1862.22 1991.82 1862.22 Q1995.83 1862.22 1998.16 1860.11 Q2000.5 1858.01 2000.5 1854.4 Q2000.5 1850.78 1998.16 1848.68 Q1995.83 1846.57 1991.82 1846.57 Q1989.95 1846.57 1988.07 1846.99 Q1986.22 1847.4 1984.27 1848.28 L1984.27 1830.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M2024.39 1834 Q2020.78 1834 2018.95 1837.57 Q2017.14 1841.11 2017.14 1848.24 Q2017.14 1855.34 2018.95 1858.91 Q2020.78 1862.45 2024.39 1862.45 Q2028.02 1862.45 2029.83 1858.91 Q2031.66 1855.34 2031.66 1848.24 Q2031.66 1841.11 2029.83 1837.57 Q2028.02 1834 2024.39 1834 M2024.39 1830.3 Q2030.2 1830.3 2033.26 1834.9 Q2036.33 1839.49 2036.33 1848.24 Q2036.33 1856.96 2033.26 1861.57 Q2030.2 1866.15 2024.39 1866.15 Q2018.58 1866.15 2015.5 1861.57 Q2012.45 1856.96 2012.45 1848.24 Q2012.45 1839.49 2015.5 1834.9 Q2018.58 1830.3 2024.39 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M2516.11 1861.55 L2523.75 1861.55 L2523.75 1835.18 L2515.44 1836.85 L2515.44 1832.59 L2523.71 1830.92 L2528.38 1830.92 L2528.38 1861.55 L2536.02 1861.55 L2536.02 1865.48 L2516.11 1865.48 L2516.11 1861.55 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M2555.47 1834 Q2551.85 1834 2550.03 1837.57 Q2548.22 1841.11 2548.22 1848.24 Q2548.22 1855.34 2550.03 1858.91 Q2551.85 1862.45 2555.47 1862.45 Q2559.1 1862.45 2560.9 1858.91 Q2562.73 1855.34 2562.73 1848.24 Q2562.73 1841.11 2560.9 1837.57 Q2559.1 1834 2555.47 1834 M2555.47 1830.3 Q2561.28 1830.3 2564.33 1834.9 Q2567.41 1839.49 2567.41 1848.24 Q2567.41 1856.96 2564.33 1861.57 Q2561.28 1866.15 2555.47 1866.15 Q2549.66 1866.15 2546.58 1861.57 Q2543.52 1856.96 2543.52 1848.24 Q2543.52 1839.49 2546.58 1834.9 Q2549.66 1830.3 2555.47 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M2585.63 1834 Q2582.02 1834 2580.19 1837.57 Q2578.38 1841.11 2578.38 1848.24 Q2578.38 1855.34 2580.19 1858.91 Q2582.02 1862.45 2585.63 1862.45 Q2589.26 1862.45 2591.07 1858.91 Q2592.9 1855.34 2592.9 1848.24 Q2592.9 1841.11 2591.07 1837.57 Q2589.26 1834 2585.63 1834 M2585.63 1830.3 Q2591.44 1830.3 2594.49 1834.9 Q2597.57 1839.49 2597.57 1848.24 Q2597.57 1856.96 2594.49 1861.57 Q2591.44 1866.15 2585.63 1866.15 Q2579.82 1866.15 2576.74 1861.57 Q2573.68 1856.96 2573.68 1848.24 Q2573.68 1839.49 2576.74 1834.9 Q2579.82 1830.3 2585.63 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M2615.79 1834 Q2612.18 1834 2610.35 1837.57 Q2608.54 1841.11 2608.54 1848.24 Q2608.54 1855.34 2610.35 1858.91 Q2612.18 1862.45 2615.79 1862.45 Q2619.42 1862.45 2621.23 1858.91 Q2623.06 1855.34 2623.06 1848.24 Q2623.06 1841.11 2621.23 1837.57 Q2619.42 1834 2615.79 1834 M2615.79 1830.3 Q2621.6 1830.3 2624.65 1834.9 Q2627.73 1839.49 2627.73 1848.24 Q2627.73 1856.96 2624.65 1861.57 Q2621.6 1866.15 2615.79 1866.15 Q2609.98 1866.15 2606.9 1861.57 Q2603.84 1856.96 2603.84 1848.24 Q2603.84 1839.49 2606.9 1834.9 Q2609.98 1830.3 2615.79 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip452)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="196.816,1631.44 2640.76,1631.44 "></polyline>
<polyline clip-path="url(#clip452)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="196.816,1386.82 2640.76,1386.82 "></polyline>
<polyline clip-path="url(#clip452)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="196.816,1142.2 2640.76,1142.2 "></polyline>
<polyline clip-path="url(#clip452)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="196.816,897.584 2640.76,897.584 "></polyline>
<polyline clip-path="url(#clip452)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="196.816,652.966 2640.76,652.966 "></polyline>
<polyline clip-path="url(#clip452)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="196.816,408.348 2640.76,408.348 "></polyline>
<polyline clip-path="url(#clip452)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="196.816,163.73 2640.76,163.73 "></polyline>
<polyline clip-path="url(#clip450)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="196.816,1800.78 196.816,47.2441 "></polyline>
<polyline clip-path="url(#clip450)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="196.816,1631.44 215.714,1631.44 "></polyline>
<polyline clip-path="url(#clip450)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="196.816,1386.82 215.714,1386.82 "></polyline>
<polyline clip-path="url(#clip450)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="196.816,1142.2 215.714,1142.2 "></polyline>
<polyline clip-path="url(#clip450)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="196.816,897.584 215.714,897.584 "></polyline>
<polyline clip-path="url(#clip450)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="196.816,652.966 215.714,652.966 "></polyline>
<polyline clip-path="url(#clip450)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="196.816,408.348 215.714,408.348 "></polyline>
<polyline clip-path="url(#clip450)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="196.816,163.73 215.714,163.73 "></polyline>
<path clip-path="url(#clip450)" d="M50.5475 1631.89 L80.2233 1631.89 L80.2233 1635.82 L50.5475 1635.82 L50.5475 1631.89 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M89.1352 1614.16 L111.357 1614.16 L111.357 1616.15 L98.8111 1648.72 L93.9269 1648.72 L105.732 1618.09 L89.1352 1618.09 L89.1352 1614.16 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M120.478 1642.84 L125.362 1642.84 L125.362 1648.72 L120.478 1648.72 L120.478 1642.84 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M135.593 1614.16 L153.95 1614.16 L153.95 1618.09 L139.876 1618.09 L139.876 1626.57 Q140.894 1626.22 141.913 1626.06 Q142.931 1625.87 143.95 1625.87 Q149.737 1625.87 153.116 1629.04 Q156.496 1632.21 156.496 1637.63 Q156.496 1643.21 153.024 1646.31 Q149.552 1649.39 143.232 1649.39 Q141.056 1649.39 138.788 1649.02 Q136.542 1648.65 134.135 1647.91 L134.135 1643.21 Q136.218 1644.34 138.441 1644.9 Q140.663 1645.45 143.14 1645.45 Q147.144 1645.45 149.482 1643.35 Q151.82 1641.24 151.82 1637.63 Q151.82 1634.02 149.482 1631.91 Q147.144 1629.81 143.14 1629.81 Q141.265 1629.81 139.39 1630.22 Q137.538 1630.64 135.593 1631.52 L135.593 1614.16 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M49.5521 1387.27 L79.2279 1387.27 L79.2279 1391.21 L49.5521 1391.21 L49.5521 1387.27 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M89.3667 1369.54 L107.723 1369.54 L107.723 1373.48 L93.6491 1373.48 L93.6491 1381.95 Q94.6676 1381.6 95.6861 1381.44 Q96.7047 1381.25 97.7232 1381.25 Q103.51 1381.25 106.89 1384.42 Q110.269 1387.6 110.269 1393.01 Q110.269 1398.59 106.797 1401.69 Q103.325 1404.77 97.0056 1404.77 Q94.8297 1404.77 92.5612 1404.4 Q90.3158 1404.03 87.9084 1403.29 L87.9084 1398.59 Q89.9917 1399.73 92.2139 1400.28 Q94.4361 1400.84 96.913 1400.84 Q100.918 1400.84 103.256 1398.73 Q105.593 1396.62 105.593 1393.01 Q105.593 1389.4 103.256 1387.29 Q100.918 1385.19 96.913 1385.19 Q95.038 1385.19 93.163 1385.6 Q91.3112 1386.02 89.3667 1386.9 L89.3667 1369.54 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M119.482 1398.22 L124.367 1398.22 L124.367 1404.1 L119.482 1404.1 L119.482 1398.22 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M144.552 1372.62 Q140.941 1372.62 139.112 1376.18 Q137.306 1379.73 137.306 1386.85 Q137.306 1393.96 139.112 1397.53 Q140.941 1401.07 144.552 1401.07 Q148.186 1401.07 149.991 1397.53 Q151.82 1393.96 151.82 1386.85 Q151.82 1379.73 149.991 1376.18 Q148.186 1372.62 144.552 1372.62 M144.552 1368.92 Q150.362 1368.92 153.417 1373.52 Q156.496 1378.1 156.496 1386.85 Q156.496 1395.58 153.417 1400.19 Q150.362 1404.77 144.552 1404.77 Q138.741 1404.77 135.663 1400.19 Q132.607 1395.58 132.607 1386.85 Q132.607 1378.1 135.663 1373.52 Q138.741 1368.92 144.552 1368.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M50.5475 1142.65 L80.2233 1142.65 L80.2233 1146.59 L50.5475 1146.59 L50.5475 1142.65 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M94.3436 1155.55 L110.663 1155.55 L110.663 1159.48 L88.7186 1159.48 L88.7186 1155.55 Q91.3806 1152.79 95.9639 1148.16 Q100.57 1143.51 101.751 1142.17 Q103.996 1139.64 104.876 1137.91 Q105.779 1136.15 105.779 1134.46 Q105.779 1131.7 103.834 1129.97 Q101.913 1128.23 98.8111 1128.23 Q96.6121 1128.23 94.1584 1129 Q91.7278 1129.76 88.9501 1131.31 L88.9501 1126.59 Q91.7741 1125.45 94.2278 1124.88 Q96.6815 1124.3 98.7185 1124.3 Q104.089 1124.3 107.283 1126.98 Q110.478 1129.67 110.478 1134.16 Q110.478 1136.29 109.668 1138.21 Q108.881 1140.11 106.774 1142.7 Q106.195 1143.37 103.094 1146.59 Q99.9917 1149.78 94.3436 1155.55 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M120.478 1153.6 L125.362 1153.6 L125.362 1159.48 L120.478 1159.48 L120.478 1153.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M135.593 1124.92 L153.95 1124.92 L153.95 1128.86 L139.876 1128.86 L139.876 1137.33 Q140.894 1136.98 141.913 1136.82 Q142.931 1136.63 143.95 1136.63 Q149.737 1136.63 153.116 1139.81 Q156.496 1142.98 156.496 1148.39 Q156.496 1153.97 153.024 1157.07 Q149.552 1160.15 143.232 1160.15 Q141.056 1160.15 138.788 1159.78 Q136.542 1159.41 134.135 1158.67 L134.135 1153.97 Q136.218 1155.11 138.441 1155.66 Q140.663 1156.22 143.14 1156.22 Q147.144 1156.22 149.482 1154.11 Q151.82 1152.01 151.82 1148.39 Q151.82 1144.78 149.482 1142.68 Q147.144 1140.57 143.14 1140.57 Q141.265 1140.57 139.39 1140.99 Q137.538 1141.4 135.593 1142.28 L135.593 1124.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M99.3204 883.383 Q95.7093 883.383 93.8806 886.948 Q92.075 890.489 92.075 897.619 Q92.075 904.725 93.8806 908.29 Q95.7093 911.832 99.3204 911.832 Q102.955 911.832 104.76 908.29 Q106.589 904.725 106.589 897.619 Q106.589 890.489 104.76 886.948 Q102.955 883.383 99.3204 883.383 M99.3204 879.679 Q105.131 879.679 108.186 884.286 Q111.265 888.869 111.265 897.619 Q111.265 906.346 108.186 910.952 Q105.131 915.535 99.3204 915.535 Q93.5102 915.535 90.4315 910.952 Q87.376 906.346 87.376 897.619 Q87.376 888.869 90.4315 884.286 Q93.5102 879.679 99.3204 879.679 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M119.482 908.984 L124.367 908.984 L124.367 914.864 L119.482 914.864 L119.482 908.984 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M144.552 883.383 Q140.941 883.383 139.112 886.948 Q137.306 890.489 137.306 897.619 Q137.306 904.725 139.112 908.29 Q140.941 911.832 144.552 911.832 Q148.186 911.832 149.991 908.29 Q151.82 904.725 151.82 897.619 Q151.82 890.489 149.991 886.948 Q148.186 883.383 144.552 883.383 M144.552 879.679 Q150.362 879.679 153.417 884.286 Q156.496 888.869 156.496 897.619 Q156.496 906.346 153.417 910.952 Q150.362 915.535 144.552 915.535 Q138.741 915.535 135.663 910.952 Q132.607 906.346 132.607 897.619 Q132.607 888.869 135.663 884.286 Q138.741 879.679 144.552 879.679 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M94.3436 666.311 L110.663 666.311 L110.663 670.246 L88.7186 670.246 L88.7186 666.311 Q91.3806 663.556 95.9639 658.927 Q100.57 654.274 101.751 652.931 Q103.996 650.408 104.876 648.672 Q105.779 646.913 105.779 645.223 Q105.779 642.468 103.834 640.732 Q101.913 638.996 98.8111 638.996 Q96.6121 638.996 94.1584 639.76 Q91.7278 640.524 88.9501 642.075 L88.9501 637.353 Q91.7741 636.218 94.2278 635.64 Q96.6815 635.061 98.7185 635.061 Q104.089 635.061 107.283 637.746 Q110.478 640.431 110.478 644.922 Q110.478 647.052 109.668 648.973 Q108.881 650.871 106.774 653.464 Q106.195 654.135 103.094 657.353 Q99.9917 660.547 94.3436 666.311 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M120.478 664.366 L125.362 664.366 L125.362 670.246 L120.478 670.246 L120.478 664.366 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M135.593 635.686 L153.95 635.686 L153.95 639.621 L139.876 639.621 L139.876 648.093 Q140.894 647.746 141.913 647.584 Q142.931 647.399 143.95 647.399 Q149.737 647.399 153.116 650.57 Q156.496 653.742 156.496 659.158 Q156.496 664.737 153.024 667.839 Q149.552 670.917 143.232 670.917 Q141.056 670.917 138.788 670.547 Q136.542 670.177 134.135 669.436 L134.135 664.737 Q136.218 665.871 138.441 666.427 Q140.663 666.982 143.14 666.982 Q147.144 666.982 149.482 664.876 Q151.82 662.769 151.82 659.158 Q151.82 655.547 149.482 653.441 Q147.144 651.334 143.14 651.334 Q141.265 651.334 139.39 651.751 Q137.538 652.167 135.593 653.047 L135.593 635.686 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M89.3667 391.068 L107.723 391.068 L107.723 395.003 L93.6491 395.003 L93.6491 403.475 Q94.6676 403.128 95.6861 402.966 Q96.7047 402.781 97.7232 402.781 Q103.51 402.781 106.89 405.952 Q110.269 409.124 110.269 414.54 Q110.269 420.119 106.797 423.221 Q103.325 426.299 97.0056 426.299 Q94.8297 426.299 92.5612 425.929 Q90.3158 425.559 87.9084 424.818 L87.9084 420.119 Q89.9917 421.253 92.2139 421.809 Q94.4361 422.364 96.913 422.364 Q100.918 422.364 103.256 420.258 Q105.593 418.151 105.593 414.54 Q105.593 410.929 103.256 408.823 Q100.918 406.716 96.913 406.716 Q95.038 406.716 93.163 407.133 Q91.3112 407.549 89.3667 408.429 L89.3667 391.068 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M119.482 419.748 L124.367 419.748 L124.367 425.628 L119.482 425.628 L119.482 419.748 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M144.552 394.147 Q140.941 394.147 139.112 397.712 Q137.306 401.253 137.306 408.383 Q137.306 415.489 139.112 419.054 Q140.941 422.596 144.552 422.596 Q148.186 422.596 149.991 419.054 Q151.82 415.489 151.82 408.383 Q151.82 401.253 149.991 397.712 Q148.186 394.147 144.552 394.147 M144.552 390.443 Q150.362 390.443 153.417 395.05 Q156.496 399.633 156.496 408.383 Q156.496 417.11 153.417 421.716 Q150.362 426.299 144.552 426.299 Q138.741 426.299 135.663 421.716 Q132.607 417.11 132.607 408.383 Q132.607 399.633 135.663 395.05 Q138.741 390.443 144.552 390.443 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M89.1352 146.45 L111.357 146.45 L111.357 148.441 L98.8111 181.01 L93.9269 181.01 L105.732 150.385 L89.1352 150.385 L89.1352 146.45 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M120.478 175.13 L125.362 175.13 L125.362 181.01 L120.478 181.01 L120.478 175.13 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip450)" d="M135.593 146.45 L153.95 146.45 L153.95 150.385 L139.876 150.385 L139.876 158.857 Q140.894 158.51 141.913 158.348 Q142.931 158.163 143.95 158.163 Q149.737 158.163 153.116 161.334 Q156.496 164.506 156.496 169.922 Q156.496 175.501 153.024 178.603 Q149.552 181.681 143.232 181.681 Q141.056 181.681 138.788 181.311 Q136.542 180.941 134.135 180.2 L134.135 175.501 Q136.218 176.635 138.441 177.191 Q140.663 177.746 143.14 177.746 Q147.144 177.746 149.482 175.64 Q151.82 173.533 151.82 169.922 Q151.82 166.311 149.482 164.205 Q147.144 162.098 143.14 162.098 Q141.265 162.098 139.39 162.515 Q137.538 162.931 135.593 163.811 L135.593 146.45 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip452)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:0.5; fill:none" points="265.984,973.743 268.292,1394.9 270.6,1292.19 272.908,1390.44 275.216,1413.24 277.524,1477.8 279.832,1604.69 282.139,1401.39 284.447,1385.96 286.755,1293.76 289.063,1337.39 291.371,1389.98 293.679,1299.93 295.987,1249.56 298.295,1352.35 300.603,1394.91 302.911,1313.24 305.219,1391.63 307.527,1334.11 309.834,1324.85 312.142,1367.48 314.45,1442.28 316.758,1276.8 319.066,1498.72 321.374,1581.95 323.682,1279.87 325.99,1354.3 328.298,1214.8 330.606,1374.81 332.914,1337.12 335.221,1431.73 337.529,1572.21 339.837,1402.27 342.145,1353.81 344.453,1424.82 346.761,1179.19 349.069,1309.57 351.377,1298.6 353.685,1427.41 355.993,1454.23 358.301,1384.21 360.608,1380.16 362.916,1470.48 365.224,1498.12 367.532,1530.32 369.84,1403.99 372.148,1352.89 374.456,1391.04 376.764,1507.78 379.072,1453.04 381.38,1452.64 383.688,1474.48 385.996,1424.07 388.303,1453.88 390.611,1528.18 392.919,1314.03 395.227,1331.97 397.535,1305.2 399.843,1234.82 402.151,1460.77 404.459,1359.11 406.767,1398.57 409.075,1439.6 411.383,1269.47 413.69,1479.5 415.998,1149.8 418.306,1347.19 420.614,1352.1 422.922,1603.13 425.23,1624.96 427.538,1299.46 429.846,1321.99 432.154,1361.18 434.462,1469.87 436.77,1219.95 439.077,1490.11 441.385,1244.64 443.693,1397.49 446.001,1399.84 448.309,1515.37 450.617,1490.02 452.925,1496.07 455.233,1229.68 457.541,1320.19 459.849,1296.37 462.157,1296.97 464.465,1441.58 466.772,1475.88 469.08,1354.09 471.388,1251.02 473.696,1312.76 476.004,1346.65 478.312,1376.18 480.62,1321.12 482.928,1173.8 485.236,1290.42 487.544,1490.72 489.852,1334.59 492.159,1226.5 494.467,1485.41 496.775,1392.99 499.083,1459.03 501.391,1343.91 503.699,1437.13 506.007,1376.71 508.315,1408.32 510.623,1361.28 512.931,1372.01 515.239,1409.94 517.546,1253.29 519.854,1180.6 522.162,1526.63 524.47,1400.92 526.778,1368.5 529.086,1390.81 531.394,1602.98 533.702,1347.93 536.01,1303.08 538.318,1371.55 540.626,1401.05 542.933,1510.86 545.241,1449.62 547.549,1410.43 549.857,1474.94 552.165,1368.16 554.473,1528.73 556.781,1380.63 559.089,1434.36 561.397,1470.79 563.705,1448.7 566.013,1374.13 568.321,1420.49 570.628,1371.76 572.936,1563.13 575.244,1394.94 577.552,1270.42 579.86,1377.86 582.168,1226.39 584.476,1397.99 586.784,1461.94 589.092,1567.76 591.4,1336.49 593.708,1383.29 596.015,1357 598.323,1511.61 600.631,1436.61 602.939,1461.61 605.247,1320.53 607.555,1373.89 609.863,1547.27 612.171,1556.71 614.479,1423.07 616.787,1482.08 619.095,1317.17 621.402,1453.79 623.71,1359.39 626.018,1451.1 628.326,1409.08 630.634,1402.66 632.942,1388.37 635.25,1498.81 637.558,1543.87 639.866,1513.72 642.174,1176.31 644.482,1490.27 646.79,1381.26 649.097,1205.93 651.405,1530.27 653.713,1280.45 656.021,1391.82 658.329,1393.7 660.637,1422.41 662.945,1485.98 665.253,1389.05 667.561,1320.78 669.869,1423.56 672.177,1198.96 674.484,1449.1 676.792,1457.14 679.1,1373.93 681.408,1302.58 683.716,1264.62 686.024,1080.6 688.332,1250.56 690.64,1427.29 692.948,1563.44 695.256,1390.42 697.564,1246.91 699.871,1374.26 702.179,1534.44 704.487,1430.57 706.795,1292.59 709.103,1374.92 711.411,1558.96 713.719,1369.36 716.027,1360.37 718.335,1438.29 720.643,1472.2 722.951,1337.67 725.259,1203.9 727.566,1398.72 729.874,1409.05 732.182,1388.75 734.49,1350.72 736.798,1297.54 739.106,1472.56 741.414,1293.64 743.722,1365.31 746.03,1579.66 748.338,1422.11 750.646,1334.12 752.953,1477.93 755.261,1403.6 757.569,1394.82 759.877,1342.41 762.185,1602.67 764.493,1335.01 766.801,1386.66 769.109,1445.54 771.417,1265.31 773.725,1464.98 776.033,1362.76 778.34,1282.79 780.648,1356.27 782.956,1268.56 785.264,1346.21 787.572,1441.9 789.88,1359.87 792.188,1381.13 794.496,1281.17 796.804,1491.69 799.112,1482.54 801.42,1227.89 803.728,1524.56 806.035,1390.71 808.343,1317.93 810.651,1426.07 812.959,1440.34 815.267,1312.48 817.575,1245.58 819.883,1430.4 822.191,1441.55 824.499,1537.66 826.807,1478.08 829.115,1378.46 831.422,1554.25 833.73,1238.54 836.038,1263.24 838.346,1352.41 840.654,1353.95 842.962,1165.11 845.27,1241.7 847.578,1528.94 849.886,1377.3 852.194,1538.69 854.502,1331.42 856.809,1460.84 859.117,1222.67 861.425,1547.85 863.733,1376.22 866.041,1274.36 868.349,1511.26 870.657,1438.54 872.965,1444.2 875.273,1374.93 877.581,1352.07 879.889,1517.51 882.197,1487.71 884.504,1497.12 886.812,1466.77 889.12,1179.3 891.428,1367.55 893.736,1277.63 896.044,1348.25 898.352,1320.64 900.66,1315.9 902.968,1304.93 905.276,1383.17 907.584,1427.81 909.891,1260.78 912.199,1451.23 914.507,1434.34 916.815,1511.97 919.123,1382.3 921.431,1427.84 923.739,1310.66 926.047,1550.64 928.355,1382.74 930.663,1414.62 932.971,1495.25 935.278,1316.97 937.586,1435.83 939.894,1454.1 942.202,1453.85 944.51,1305.9 946.818,1231.3 949.126,1332.9 951.434,1415.59 953.742,1606.49 956.05,1422.93 958.358,1358.81 960.665,1318.19 962.973,1320.48 965.281,1355.14 967.589,1436.09 969.897,1360.32 972.205,1509.82 974.513,1289.34 976.821,1368.94 979.129,1382.04 981.437,1350.97 983.745,1306.58 986.053,1418.8 988.36,1361.51 990.668,1328.58 992.976,1243.8 995.284,1217.21 997.592,1203.16 999.9,1424.34 1002.21,1488.02 1004.52,1173.09 1006.82,1285.67 1009.13,1473.75 1011.44,1312.03 1013.75,1464.69 1016.06,1468.64 1018.36,1416.89 1020.67,1298.36 1022.98,1486.5 1025.29,1462.54 1027.59,1356.26 1029.9,1266.13 1032.21,1459.92 1034.52,1374.56 1036.83,1432.19 1039.13,1241.21 1041.44,1318.88 1043.75,1375.1 1046.06,1414.82 1048.37,1244.18 1050.67,1306.2 1052.98,1321.22 1055.29,1386.82 1057.6,1355.58 1059.91,1328.72 1062.21,1289.57 1064.52,1379.11 1066.83,1335.32 1069.14,1402.16 1071.45,1390.68 1073.75,1269.82 1076.06,1264.53 1078.37,1460.25 1080.68,1411.71 1082.98,1280.61 1085.29,1329.65 1087.6,1367.59 1089.91,1326.96 1092.22,1494 1094.52,1457.81 1096.83,1473.87 1099.14,1341.61 1101.45,1349.74 1103.76,1463.25 1106.06,1490.4 1108.37,1434.5 1110.68,1324.69 1112.99,1360.57 1115.3,1449.61 1117.6,1381.52 1119.91,1442.74 1122.22,1533.74 1124.53,1499.7 1126.84,1429.96 1129.14,1426.05 1131.45,1235.44 1133.76,1314.67 1136.07,1148.04 1138.37,1601.02 1140.68,1321.89 1142.99,1333.24 1145.3,1383.63 1147.61,1602.91 1149.91,1527.63 1152.22,1398.42 1154.53,1463.9 1156.84,1346.04 1159.15,1419.18 1161.45,1480.74 1163.76,1328.01 1166.07,1444.76 1168.38,1411.21 1170.69,1438.64 1172.99,1361.31 1175.3,1401.37 1177.61,1444.46 1179.92,1433.5 1182.23,1355.93 1184.53,1405.54 1186.84,1553.6 1189.15,1374.46 1191.46,1330.76 1193.76,1229.74 1196.07,1437.45 1198.38,1280.64 1200.69,1524.28 1203,1286.13 1205.3,1327.76 1207.61,1570.79 1209.92,1204.65 1212.23,1273.05 1214.54,1300.4 1216.84,1559.02 1219.15,1257.46 1221.46,1378.19 1223.77,1732.1 1226.08,1404.56 1228.38,1498.27 1230.69,1494.92 1233,1323.06 1235.31,1421.93 1237.61,1366.3 1239.92,1325.5 1242.23,1268.61 1244.54,1442.89 1246.85,1309.81 1249.15,1337.09 1251.46,1384.81 1253.77,1396.43 1256.08,1416.53 1258.39,1377.66 1260.69,1457.44 1263,1194.56 1265.31,1306.95 1267.62,1418.13 1269.93,1284.16 1272.23,1295.43 1274.54,1493 1276.85,1246.75 1279.16,1280.83 1281.47,1544.9 1283.77,1318.47 1286.08,1215.23 1288.39,1349.96 1290.7,1389.68 1293,1195.7 1295.31,1391.51 1297.62,1570 1299.93,1346.18 1302.24,1395.37 1304.54,1373.24 1306.85,1526.22 1309.16,1314.14 1311.47,1447.64 1313.78,1391.99 1316.08,1500.84 1318.39,1397.52 1320.7,1453.47 1323.01,1460.39 1325.32,1440.57 1327.62,1387.59 1329.93,1453.58 1332.24,1471 1334.55,1241.59 1336.86,1577.71 1339.16,1206.11 1341.47,1465.98 1343.78,1303.73 1346.09,1432.92 1348.39,1384.18 1350.7,1292.52 1353.01,1372.84 1355.32,1323.01 1357.63,1309.41 1359.93,1233.39 1362.24,1326.91 1364.55,1270.97 1366.86,1259.87 1369.17,1281.24 1371.47,1362.54 1373.78,1342.64 1376.09,1484.01 1378.4,1341.07 1380.71,1445.26 1383.01,1364.8 1385.32,1397.52 1387.63,1268.37 1389.94,1385.12 1392.24,1306.62 1394.55,1341.36 1396.86,1428.77 1399.17,1378.12 1401.48,1512.3 1403.78,1544.31 1406.09,1440.61 1408.4,1270.41 1410.71,1427.99 1413.02,1367.31 1415.32,1407.48 1417.63,1361.79 1419.94,1363.37 1422.25,1506.52 1424.56,1630.58 1426.86,1570.17 1429.17,1354.73 1431.48,1306.18 1433.79,1470.86 1436.1,1151.94 1438.4,1418.97 1440.71,1398.23 1443.02,1576.4 1445.33,1408.06 1447.63,1413.52 1449.94,1278.14 1452.25,1318.42 1454.56,1351.22 1456.87,1435.46 1459.17,1363.49 1461.48,1477.36 1463.79,1469.71 1466.1,1365.62 1468.41,1483.81 1470.71,1374.73 1473.02,1453.45 1475.33,1408.74 1477.64,1393.61 1479.95,1388.04 1482.25,1404.26 1484.56,1318.14 1486.87,1246.66 1489.18,1526.34 1491.49,1423.76 1493.79,1331.41 1496.1,1366.12 1498.41,1476.23 1500.72,1345.29 1503.02,1349.23 1505.33,1474.28 1507.64,1242.42 1509.95,1293.37 1512.26,1483.62 1514.56,1462.62 1516.87,1297.59 1519.18,1377.56 1521.49,1448.09 1523.8,1262.21 1526.1,1378.5 1528.41,1340.09 1530.72,1294.54 1533.03,1418.92 1535.34,1354.32 1537.64,1355.2 1539.95,1605.6 1542.26,1514.18 1544.57,1280.41 1546.88,1308.22 1549.18,1557.21 1551.49,1503.49 1553.8,1453.52 1556.11,1369.7 1558.41,1432.33 1560.72,1463.07 1563.03,1176.96 1565.34,1333.58 1567.65,1264.72 1569.95,1393.45 1572.26,1308.57 1574.57,1417.27 1576.88,1433.06 1579.19,1331.19 1581.49,1444.72 1583.8,1478.48 1586.11,1550.37 1588.42,1320.87 1590.73,1428.73 1593.03,1330.02 1595.34,1751.15 1597.65,1534.31 1599.96,1345.37 1602.26,1378.29 1604.57,1377.35 1606.88,1477.65 1609.19,1147.61 1611.5,1513.57 1613.8,1269.14 1616.11,1339.71 1618.42,1268.7 1620.73,1145.1 1623.04,1318.86 1625.34,1624.91 1627.65,1448.67 1629.96,1515.04 1632.27,1467.77 1634.58,1249.1 1636.88,1458.23 1639.19,1158.72 1641.5,1375.91 1643.81,1231.23 1646.12,1513.14 1648.42,1263.86 1650.73,1520.55 1653.04,1329.05 1655.35,1549.57 1657.65,1397.93 1659.96,1486.42 1662.27,1225.42 1664.58,1499.4 1666.89,1378.08 1669.19,1378.31 1671.5,1231.09 1673.81,1420.48 1676.12,1475.61 1678.43,1621.06 1680.73,1503.91 1683.04,1432.28 1685.35,1176.42 1687.66,1415.96 1689.97,1431.11 1692.27,1379.63 1694.58,1344.94 1696.89,1299.39 1699.2,1536.53 1701.51,1362.35 1703.81,1377.78 1706.12,1255.6 1708.43,1381.47 1710.74,1409.1 1713.04,1158.6 1715.35,1385.01 1717.66,1297.41 1719.97,1417.27 1722.28,1522.93 1724.58,1477.62 1726.89,1342.13 1729.2,1361.64 1731.51,1441.97 1733.82,1450.46 1736.12,1420.78 1738.43,1407.46 1740.74,1312.99 1743.05,1338.03 1745.36,1352.5 1747.66,1456.44 1749.97,1367.39 1752.28,1306.82 1754.59,1481.3 1756.9,1407.87 1759.2,1341.95 1761.51,1332.49 1763.82,1322.79 1766.13,1388.89 1768.43,1410.06 1770.74,1477.03 1773.05,1366.15 1775.36,1390.03 1777.67,1437.56 1779.97,1476.6 1782.28,1490.8 1784.59,1479.92 1786.9,1465.2 1789.21,1332.13 1791.51,1216.76 1793.82,1509.04 1796.13,1410.83 1798.44,1417.02 1800.75,1501.05 1803.05,1249.44 1805.36,1397.17 1807.67,1400.46 1809.98,1642.32 1812.28,1487.78 1814.59,1464.19 1816.9,1407.33 1819.21,1379.77 1821.52,1320.96 1823.82,1336.96 1826.13,1422.43 1828.44,1326.54 1830.75,1301.94 1833.06,1510.29 1835.36,1472.42 1837.67,1316.73 1839.98,1374.52 1842.29,1577.73 1844.6,1251.05 1846.9,1368.7 1849.21,1505.16 1851.52,1177.17 1853.83,1578.94 1856.14,1286.7 1858.44,1277.47 1860.75,1594.7 1863.06,1315.01 1865.37,1174.33 1867.67,1314.48 1869.98,1257.36 1872.29,1518.66 1874.6,1389.78 1876.91,1472.54 1879.21,1449.1 1881.52,1439.2 1883.83,1433.92 1886.14,1404.21 1888.45,1511.13 1890.75,1409.36 1893.06,1463.09 1895.37,1377.87 1897.68,1357.36 1899.99,1304.49 1902.29,1462.2 1904.6,1360.69 1906.91,1432.53 1909.22,1497.55 1911.53,1230.29 1913.83,1344.97 1916.14,1528.7 1918.45,1294.41 1920.76,1403.48 1923.06,1308.96 1925.37,1174.96 1927.68,1523.05 1929.99,1312.04 1932.3,1447.32 1934.6,1306.35 1936.91,1599.2 1939.22,1492.15 1941.53,1456.13 1943.84,1486.76 1946.14,1502.34 1948.45,1240.26 1950.76,1385.64 1953.07,1291.4 1955.38,1385.72 1957.68,1434.02 1959.99,1223.17 1962.3,1202.75 1964.61,1290.7 1966.91,1332.3 1969.22,1460.1 1971.53,1309.78 1973.84,1200.64 1976.15,1400.43 1978.45,1452.72 1980.76,1352.05 1983.07,1279.89 1985.38,1530.75 1987.69,1308.4 1989.99,1433.51 1992.3,1562.14 1994.61,1402.9 1996.92,1402.23 1999.23,1379.05 2001.53,1329.17 2003.84,1511.13 2006.15,1355.09 2008.46,1596.99 2010.77,1542.29 2013.07,1260.02 2015.38,1405.48 2017.69,1352.98 2020,1310.14 2022.3,1241.5 2024.61,1329.69 2026.92,1549.76 2029.23,1307.52 2031.54,1421.1 2033.84,1357.71 2036.15,1405.62 2038.46,1469.66 2040.77,1422.14 2043.08,1415.52 2045.38,1218.05 2047.69,1521.68 2050,1335.76 2052.31,1397.84 2054.62,1392.15 2056.92,1398.84 2059.23,1519.81 2061.54,1318.93 2063.85,1232.29 2066.16,1267.83 2068.46,1312.04 2070.77,1546.9 2073.08,1532.96 2075.39,1539.29 2077.69,1130.28 2080,1358.63 2082.31,1340.76 2084.62,1348.87 2086.93,1334.96 2089.23,1285.4 2091.54,1354.88 2093.85,1286.44 2096.16,1363.12 2098.47,1318.7 2100.77,1421.52 2103.08,1294.38 2105.39,1480.99 2107.7,1258.25 2110.01,1222.19 2112.31,1393.66 2114.62,1580.65 2116.93,1343.65 2119.24,1146.93 2121.55,1324 2123.85,1348.7 2126.16,1544.67 2128.47,1354.39 2130.78,1160.87 2133.08,1483.09 2135.39,1441.79 2137.7,1486.27 2140.01,1462.9 2142.32,1349.49 2144.62,1484.05 2146.93,1495.91 2149.24,1341.84 2151.55,1266.71 2153.86,1181.78 2156.16,1221.26 2158.47,1408.68 2160.78,1463.34 2163.09,1204.64 2165.4,1480.02 2167.7,1346.5 2170.01,1548.59 2172.32,1540.64 2174.63,1421.14 2176.93,1138.08 2179.24,1362.91 2181.55,1399.06 2183.86,1302.14 2186.17,1333.35 2188.47,1403.41 2190.78,1543.86 2193.09,1256.26 2195.4,1227.47 2197.71,1647.9 2200.01,1547.74 2202.32,1626.97 2204.63,1342.35 2206.94,1149.41 2209.25,1448.86 2211.55,1388.97 2213.86,1399.22 2216.17,1331.1 2218.48,1496.87 2220.79,1322.52 2223.09,1471.73 2225.4,1268.72 2227.71,1393.12 2230.02,1433.95 2232.32,1480.85 2234.63,1343.69 2236.94,1517.53 2239.25,1381.74 2241.56,1517.87 2243.86,1357.03 2246.17,1258.04 2248.48,1329.51 2250.79,1480.96 2253.1,1400.42 2255.4,1186.55 2257.71,1464.2 2260.02,1375.03 2262.33,1455.21 2264.64,1390.22 2266.94,1502.69 2269.25,1429.14 2271.56,1384.2 2273.87,1534.59 2276.18,1417.05 2278.48,1363.92 2280.79,1400.45 2283.1,1492.29 2285.41,1455.02 2287.71,1370.92 2290.02,1514.95 2292.33,1228.93 2294.64,1369.13 2296.95,1414.15 2299.25,1308.86 2301.56,1476.22 2303.87,1468.01 2306.18,1469.88 2308.49,1377.47 2310.79,1404.69 2313.1,1552.01 2315.41,1413.27 2317.72,1313.09 2320.03,1453.59 2322.33,1396.46 2324.64,1442.36 2326.95,1487.82 2329.26,1399.96 2331.56,1395.61 2333.87,1367.55 2336.18,1545.66 2338.49,1399.93 2340.8,1344.81 2343.1,1376.19 2345.41,1368.72 2347.72,1407.5 2350.03,1411.47 2352.34,1335.19 2354.64,1281.55 2356.95,1439.14 2359.26,1329.12 2361.57,1359.95 2363.88,1416.75 2366.18,1449.25 2368.49,1543.24 2370.8,1367.95 2373.11,1460.15 2375.42,1392.72 2377.72,1377.76 2380.03,1349.8 2382.34,1343.8 2384.65,1282.54 2386.95,1427.66 2389.26,1407.16 2391.57,1469.1 2393.88,1375.25 2396.19,1313.89 2398.49,1307.9 2400.8,1252.84 2403.11,1486.98 2405.42,1275.57 2407.73,1404.25 2410.03,1478.07 2412.34,1251.47 2414.65,1585.02 2416.96,1325.99 2419.27,1278.1 2421.57,1429.57 2423.88,1563.12 2426.19,1298.18 2428.5,1347.45 2430.81,1504.58 2433.11,1387.3 2435.42,1331.56 2437.73,1431.66 2440.04,1277.78 2442.34,1429.16 2444.65,1361.94 2446.96,1513.49 2449.27,1330.99 2451.58,1522.1 2453.88,1171.75 2456.19,1252.61 2458.5,1490.25 2460.81,1484.46 2463.12,1461.01 2465.42,1354.4 2467.73,1334.73 2470.04,1493.34 2472.35,1367.02 2474.66,1315.64 2476.96,1363.23 2479.27,1493.88 2481.58,1374.67 2483.89,1277.25 2486.2,1583.55 2488.5,1237.55 2490.81,1186.11 2493.12,1251.25 2495.43,1440.79 2497.73,1419.55 2500.04,1323.91 2502.35,1500.88 2504.66,1433.89 2506.97,1339.05 2509.27,1480.59 2511.58,1243.38 2513.89,1370.82 2516.2,1298.02 2518.51,1575.69 2520.81,1327.96 2523.12,1271.09 2525.43,1545.81 2527.74,1386.82 2530.05,1344.83 2532.35,1360.79 2534.66,1332.99 2536.97,1372.92 2539.28,1235.74 2541.58,1408.93 2543.89,1350.47 2546.2,1437.15 2548.51,1297.03 2550.82,1392.36 2553.12,1265.3 2555.43,1466.46 2557.74,1281.03 2560.05,1356.82 2562.36,1241.63 2564.66,1605.99 2566.97,1605.29 2569.28,1310.71 2571.59,1332.39 "></polyline>
<polyline clip-path="url(#clip452)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:0.5; fill:none" points="265.984,788.679 268.292,920.005 270.6,996.721 272.908,914.733 275.216,959.781 277.524,876.561 279.832,994.375 282.139,913.047 284.447,890.044 286.755,866.369 289.063,848.188 291.371,960.329 293.679,857.794 295.987,962.176 298.295,1017.74 300.603,993.224 302.911,998.969 305.219,932.363 307.527,999.82 309.834,882.838 312.142,851.369 314.45,1012.53 316.758,848.432 319.066,758.346 321.374,885.161 323.682,848.563 325.99,902.601 328.298,824.008 330.606,905.743 332.914,962.71 335.221,963.148 337.529,868.858 339.837,920.238 342.145,774.134 344.453,1009.38 346.761,1113.35 349.069,965.921 351.377,695.855 353.685,1021.56 355.993,1079.75 358.301,1035.92 360.608,741.884 362.916,993.575 365.224,1006.21 367.532,1014.78 369.84,977.894 372.148,954.354 374.456,785.293 376.764,840.097 379.072,993.051 381.38,891.429 383.688,986.15 385.996,910.258 388.303,921.38 390.611,1008.22 392.919,753.643 395.227,806.341 397.535,923.736 399.843,732.63 402.151,880.462 404.459,847.234 406.767,935.047 409.075,808.813 411.383,993.05 413.69,758.777 415.998,1015.23 418.306,834.647 420.614,849.265 422.922,775.335 425.23,1108.92 427.538,1029.7 429.846,909.972 432.154,949.849 434.462,959.82 436.77,790.937 439.077,956.664 441.385,1053.64 443.693,885.626 446.001,787.389 448.309,997.241 450.617,963.015 452.925,637.502 455.233,848.634 457.541,980.846 459.849,864.377 462.157,875.444 464.465,871.131 466.772,787.925 469.08,945.393 471.388,798.246 473.696,938.252 476.004,824.614 478.312,992.715 480.62,917.785 482.928,989.081 485.236,932.733 487.544,1096.38 489.852,1106.29 492.159,951.296 494.467,949.832 496.775,936.423 499.083,918.445 501.391,970.382 503.699,893.977 506.007,1061.78 508.315,932.854 510.623,996.171 512.931,849.164 515.239,1057.61 517.546,922.602 519.854,826.72 522.162,832.964 524.47,730.199 526.778,839.833 529.086,870.784 531.394,851.008 533.702,761.842 536.01,871.834 538.318,1042.13 540.626,971.3 542.933,851.401 545.241,831.894 547.549,958.675 549.857,777.52 552.165,700.655 554.473,949.28 556.781,891.621 559.089,850.605 561.397,992.342 563.705,811.91 566.013,1114.81 568.321,1047.92 570.628,883.248 572.936,819.875 575.244,802.983 577.552,892.5 579.86,935.364 582.168,745.581 584.476,1002.63 586.784,983.009 589.092,862.581 591.4,785.152 593.708,848.649 596.015,1003.29 598.323,811.483 600.631,1035.22 602.939,959.431 605.247,969.95 607.555,937.747 609.863,1048.17 612.171,983.271 614.479,947.913 616.787,819.221 619.095,910.096 621.402,706.255 623.71,858.409 626.018,903.025 628.326,829.866 630.634,1004.86 632.942,956.157 635.25,868.916 637.558,796.475 639.866,823.285 642.174,786.914 644.482,1007.28 646.79,802.856 649.097,753.399 651.405,853.026 653.713,872.14 656.021,870.664 658.329,791.43 660.637,971.961 662.945,976.893 665.253,1015.67 667.561,709.806 669.869,827.291 672.177,851.559 674.484,871.536 676.792,946.504 679.1,836.414 681.408,946.846 683.716,913.34 686.024,961.169 688.332,856.009 690.64,927.49 692.948,796.798 695.256,797.614 697.564,845.326 699.871,879.319 702.179,835.93 704.487,938.848 706.795,856.325 709.103,891.129 711.411,1089.48 713.719,806.489 716.027,922.293 718.335,909.676 720.643,867.284 722.951,731.6 725.259,881.138 727.566,964.422 729.874,1063.98 732.182,1031.53 734.49,968.982 736.798,852.005 739.106,887.071 741.414,845.873 743.722,994.012 746.03,791.032 748.338,923.954 750.646,916.021 752.953,816.549 755.261,752.107 757.569,967.464 759.877,1124.96 762.185,1012.66 764.493,813.426 766.801,856.169 769.109,797.568 771.417,1052.63 773.725,742.215 776.033,735.395 778.34,887.52 780.648,921.609 782.956,761.068 785.264,821.014 787.572,1060.56 789.88,914.263 792.188,1020.36 794.496,1095.59 796.804,920.134 799.112,963.74 801.42,817.694 803.728,856.915 806.035,865.283 808.343,949.882 810.651,873.9 812.959,904.433 815.267,909.813 817.575,855.786 819.883,719.912 822.191,1081.99 824.499,793.733 826.807,927.097 829.115,850.5 831.422,864.807 833.73,824.152 836.038,840.261 838.346,874.118 840.654,972.994 842.962,1036.58 845.27,1014.44 847.578,956.484 849.886,826.945 852.194,857.541 854.502,985.663 856.809,820.33 859.117,808.621 861.425,973.932 863.733,863.91 866.041,940.238 868.349,900.337 870.657,803.404 872.965,817.241 875.273,1045.14 877.581,896.97 879.889,919.89 882.197,772.704 884.504,874.345 886.812,905.338 889.12,790.151 891.428,1126.54 893.736,800.701 896.044,824.862 898.352,980.473 900.66,1026.93 902.968,984.882 905.276,961.295 907.584,834.748 909.891,990.33 912.199,722.729 914.507,926.166 916.815,842.921 919.123,896.893 921.431,1025.18 923.739,835.94 926.047,949.659 928.355,876.306 930.663,829.037 932.971,837.503 935.278,865.669 937.586,983.85 939.894,789.435 942.202,896.121 944.51,851.79 946.818,887.476 949.126,922.604 951.434,918.069 953.742,898.463 956.05,977.644 958.358,704.172 960.665,926.088 962.973,751.369 965.281,888.45 967.589,856.854 969.897,767.554 972.205,816.781 974.513,947.068 976.821,873.987 979.129,825.643 981.437,974.912 983.745,788.392 986.053,1061.38 988.36,860.218 990.668,902.353 992.976,869.746 995.284,867.686 997.592,939.04 999.9,940.333 1002.21,770.879 1004.52,958.027 1006.82,934.693 1009.13,1049.96 1011.44,996.548 1013.75,1002.13 1016.06,1001.77 1018.36,827.86 1020.67,911.332 1022.98,841.538 1025.29,853.789 1027.59,1012.18 1029.9,854.466 1032.21,956.811 1034.52,834.638 1036.83,847.921 1039.13,827.028 1041.44,761.413 1043.75,786.11 1046.06,784.713 1048.37,1134.07 1050.67,923.356 1052.98,807.735 1055.29,788.063 1057.6,753.061 1059.91,834.769 1062.21,1002.1 1064.52,736.124 1066.83,885.208 1069.14,848.905 1071.45,928.032 1073.75,844.471 1076.06,977.446 1078.37,909.134 1080.68,869.466 1082.98,1169.52 1085.29,927.241 1087.6,987.739 1089.91,950.099 1092.22,859.615 1094.52,842.534 1096.83,854.856 1099.14,909.795 1101.45,1014.74 1103.76,761.639 1106.06,890.009 1108.37,911.604 1110.68,807.313 1112.99,995.723 1115.3,787.861 1117.6,878.949 1119.91,943.56 1122.22,870.021 1124.53,811.635 1126.84,879.16 1129.14,907.378 1131.45,975.699 1133.76,1108.72 1136.07,1067.5 1138.37,923.176 1140.68,863.738 1142.99,913.255 1145.3,913.687 1147.61,1034.43 1149.91,1026.24 1152.22,723.126 1154.53,958.219 1156.84,836.526 1159.15,864.459 1161.45,762.824 1163.76,1059.51 1166.07,1171.09 1168.38,713.015 1170.69,930.27 1172.99,865.621 1175.3,757.579 1177.61,1044.47 1179.92,769.237 1182.23,961.183 1184.53,735.584 1186.84,769.456 1189.15,952.638 1191.46,1113.9 1193.76,1066.02 1196.07,852.753 1198.38,843.583 1200.69,958.884 1203,884.352 1205.3,775.246 1207.61,920.807 1209.92,753.944 1212.23,997.143 1214.54,858.07 1216.84,833.816 1219.15,980.986 1221.46,965.463 1223.77,926.788 1226.08,951.353 1228.38,1111.81 1230.69,808.448 1233,853.828 1235.31,714.518 1237.61,808.964 1239.92,980.952 1242.23,820.774 1244.54,861.733 1246.85,854.312 1249.15,947.835 1251.46,906.161 1253.77,1011.55 1256.08,613.813 1258.39,921.582 1260.69,969.717 1263,869.776 1265.31,854.836 1267.62,902.705 1269.93,933.901 1272.23,927.334 1274.54,1016.07 1276.85,955.34 1279.16,853.095 1281.47,1003.41 1283.77,883.918 1286.08,852.422 1288.39,828.247 1290.7,756.394 1293,937.068 1295.31,1016.53 1297.62,818.953 1299.93,847.465 1302.24,945.171 1304.54,1046.12 1306.85,907.747 1309.16,882.483 1311.47,911.198 1313.78,887.345 1316.08,1032.15 1318.39,1084.42 1320.7,898.753 1323.01,823.513 1325.32,895.933 1327.62,948.335 1329.93,1095 1332.24,944.347 1334.55,767.46 1336.86,839.027 1339.16,1106.82 1341.47,1012.9 1343.78,851.084 1346.09,956.426 1348.39,1040.14 1350.7,935.365 1353.01,981.377 1355.32,956.038 1357.63,885.764 1359.93,1117.07 1362.24,737.345 1364.55,823.084 1366.86,757.479 1369.17,786.822 1371.47,793.881 1373.78,895.304 1376.09,1007.4 1378.4,971.916 1380.71,865.396 1383.01,882.362 1385.32,935.722 1387.63,954.491 1389.94,838.483 1392.24,887.309 1394.55,852.931 1396.86,876.957 1399.17,880.671 1401.48,972.951 1403.78,845.194 1406.09,835.589 1408.4,1031.84 1410.71,963.604 1413.02,865.95 1415.32,991.505 1417.63,847.84 1419.94,875.842 1422.25,960.044 1424.56,880.052 1426.86,886.001 1429.17,992.398 1431.48,765.3 1433.79,821.126 1436.1,813.163 1438.4,1083.44 1440.71,994.256 1443.02,858.638 1445.33,979.382 1447.63,977.278 1449.94,812.198 1452.25,747.751 1454.56,961.617 1456.87,862.86 1459.17,838.956 1461.48,878.382 1463.79,1002.92 1466.1,902.34 1468.41,730.926 1470.71,860.525 1473.02,859.938 1475.33,760.168 1477.64,971.926 1479.95,927.158 1482.25,1134.81 1484.56,946.174 1486.87,771.485 1489.18,775.348 1491.49,769.64 1493.79,692.494 1496.1,949.432 1498.41,975.564 1500.72,1042.81 1503.02,1093.54 1505.33,789.643 1507.64,793.203 1509.95,974.435 1512.26,1009.34 1514.56,878.423 1516.87,852.514 1519.18,1022.41 1521.49,908.892 1523.8,953.624 1526.1,838.898 1528.41,957.715 1530.72,824.178 1533.03,1180.09 1535.34,758.928 1537.64,825.183 1539.95,1070.97 1542.26,836.804 1544.57,725.769 1546.88,969.628 1549.18,890.756 1551.49,946.695 1553.8,1018.79 1556.11,881.573 1558.41,972.853 1560.72,963.06 1563.03,949.091 1565.34,920.481 1567.65,956.801 1569.95,843.686 1572.26,937.128 1574.57,818.78 1576.88,906.504 1579.19,979.785 1581.49,830.853 1583.8,879.589 1586.11,909.493 1588.42,785.129 1590.73,859.762 1593.03,836.905 1595.34,870.848 1597.65,904.736 1599.96,926.117 1602.26,841.96 1604.57,914.279 1606.88,823.713 1609.19,1012.49 1611.5,989.69 1613.8,862.187 1616.11,687.909 1618.42,874.94 1620.73,841.539 1623.04,1001.5 1625.34,981.819 1627.65,1014.13 1629.96,1127.22 1632.27,957.305 1634.58,985.646 1636.88,907.129 1639.19,736.736 1641.5,982.816 1643.81,939.224 1646.12,822.769 1648.42,886.849 1650.73,773.695 1653.04,925.759 1655.35,909.673 1657.65,946.331 1659.96,937.956 1662.27,883.051 1664.58,911.028 1666.89,993.022 1669.19,737.618 1671.5,1024.48 1673.81,761.23 1676.12,826.959 1678.43,928.088 1680.73,828.201 1683.04,821.928 1685.35,967.9 1687.66,792.557 1689.97,856.53 1692.27,977.971 1694.58,883.525 1696.89,855.51 1699.2,813.558 1701.51,770.823 1703.81,841.936 1706.12,863.803 1708.43,942.976 1710.74,801.517 1713.04,865.927 1715.35,895.548 1717.66,943.389 1719.97,913.913 1722.28,870.813 1724.58,914.574 1726.89,885.553 1729.2,931.51 1731.51,956.549 1733.82,841.878 1736.12,965.536 1738.43,1081.85 1740.74,721.011 1743.05,836.963 1745.36,879.712 1747.66,1065.08 1749.97,1038.18 1752.28,911.487 1754.59,1072.14 1756.9,982.551 1759.2,981.019 1761.51,953.821 1763.82,913.296 1766.13,842.372 1768.43,732.041 1770.74,1047.07 1773.05,945.73 1775.36,919.397 1777.67,767.725 1779.97,1004.08 1782.28,882.059 1784.59,1079.18 1786.9,982.341 1789.21,763.079 1791.51,780.468 1793.82,937.901 1796.13,914.184 1798.44,909.169 1800.75,758.167 1803.05,968.676 1805.36,979.831 1807.67,949.4 1809.98,807.829 1812.28,931.46 1814.59,794.345 1816.9,970.991 1819.21,670.09 1821.52,1110.68 1823.82,862.563 1826.13,858.199 1828.44,763.035 1830.75,705.73 1833.06,930.428 1835.36,939.126 1837.67,895.555 1839.98,998.765 1842.29,859.69 1844.6,919.698 1846.9,784.161 1849.21,886.926 1851.52,748.707 1853.83,973.187 1856.14,671.26 1858.44,799.011 1860.75,883.92 1863.06,908.786 1865.37,965.291 1867.67,932.516 1869.98,729.986 1872.29,807.218 1874.6,1023.37 1876.91,1044.26 1879.21,990.147 1881.52,741.213 1883.83,812.831 1886.14,964.916 1888.45,780.421 1890.75,902.89 1893.06,1002.27 1895.37,879.212 1897.68,890.467 1899.99,1034.02 1902.29,1040.05 1904.6,827.011 1906.91,850.741 1909.22,1039.64 1911.53,976.318 1913.83,969.142 1916.14,967.337 1918.45,1065.17 1920.76,842.452 1923.06,1032.83 1925.37,987.261 1927.68,1062.28 1929.99,878.36 1932.3,974.649 1934.6,922.035 1936.91,889.736 1939.22,756.647 1941.53,831.671 1943.84,880.634 1946.14,917.391 1948.45,990.577 1950.76,988.327 1953.07,855.25 1955.38,863.208 1957.68,776.401 1959.99,890.371 1962.3,670.215 1964.61,998.656 1966.91,853.122 1969.22,816.068 1971.53,859.856 1973.84,884.84 1976.15,885.763 1978.45,904.177 1980.76,964.685 1983.07,881.598 1985.38,940.825 1987.69,839.164 1989.99,1045.56 1992.3,782.691 1994.61,934.274 1996.92,995.64 1999.23,854.439 2001.53,983.523 2003.84,919.491 2006.15,913.451 2008.46,1063.5 2010.77,868.979 2013.07,868.982 2015.38,932.182 2017.69,973.621 2020,938.147 2022.3,999.716 2024.61,831.8 2026.92,889.169 2029.23,993.761 2031.54,727.468 2033.84,949.68 2036.15,932.724 2038.46,952.76 2040.77,943.538 2043.08,951.264 2045.38,767.513 2047.69,985.271 2050,912.985 2052.31,1065.41 2054.62,865.093 2056.92,1046.22 2059.23,846.8 2061.54,942.659 2063.85,927.358 2066.16,872.696 2068.46,857.055 2070.77,937.158 2073.08,785.579 2075.39,774.047 2077.69,913.61 2080,769.364 2082.31,688.243 2084.62,924.748 2086.93,1040.55 2089.23,817.86 2091.54,991.555 2093.85,922.901 2096.16,934.524 2098.47,914.457 2100.77,1055.28 2103.08,824.701 2105.39,1009.55 2107.7,1090.84 2110.01,1017.53 2112.31,962.141 2114.62,916.869 2116.93,970.113 2119.24,895.676 2121.55,968.25 2123.85,893.866 2126.16,869.517 2128.47,885.762 2130.78,871.369 2133.08,951.199 2135.39,853.582 2137.7,942.679 2140.01,915.628 2142.32,893.687 2144.62,799.537 2146.93,930.493 2149.24,814.84 2151.55,896.407 2153.86,946.51 2156.16,1011.59 2158.47,851.776 2160.78,924.284 2163.09,990.133 2165.4,951.587 2167.7,801.972 2170.01,1076.14 2172.32,697.702 2174.63,1001.33 2176.93,1004.92 2179.24,833.685 2181.55,951.584 2183.86,910.595 2186.17,831.953 2188.47,1071.16 2190.78,676.433 2193.09,775.631 2195.4,1141.91 2197.71,919.468 2200.01,834.969 2202.32,734.925 2204.63,778.584 2206.94,1000.19 2209.25,983.293 2211.55,957.172 2213.86,847.999 2216.17,814.888 2218.48,813.529 2220.79,918.351 2223.09,811.662 2225.4,837.884 2227.71,991.173 2230.02,897.412 2232.32,1001.5 2234.63,750.472 2236.94,846.855 2239.25,994.726 2241.56,958.832 2243.86,859.323 2246.17,784.693 2248.48,1046.56 2250.79,1012.4 2253.1,920.153 2255.4,994.776 2257.71,823.251 2260.02,900.771 2262.33,991.495 2264.64,875.951 2266.94,856.186 2269.25,864.726 2271.56,797.212 2273.87,1135.24 2276.18,953.055 2278.48,941.93 2280.79,923.928 2283.1,856.79 2285.41,813.633 2287.71,741.937 2290.02,977.126 2292.33,682.58 2294.64,870.512 2296.95,959.042 2299.25,933.358 2301.56,912.671 2303.87,795.605 2306.18,795.838 2308.49,953.261 2310.79,942.288 2313.1,964.215 2315.41,787.64 2317.72,909.345 2320.03,983.792 2322.33,864.819 2324.64,833.13 2326.95,856.688 2329.26,872.777 2331.56,868.849 2333.87,834.927 2336.18,992.032 2338.49,921.235 2340.8,804.416 2343.1,963.943 2345.41,854.117 2347.72,965.589 2350.03,914.225 2352.34,873.574 2354.64,686.174 2356.95,961.179 2359.26,894.185 2361.57,821.132 2363.88,958.599 2366.18,877.895 2368.49,1080.59 2370.8,808.763 2373.11,1063.71 2375.42,838.675 2377.72,827.312 2380.03,840.732 2382.34,961.464 2384.65,937.943 2386.95,912.298 2389.26,758.797 2391.57,727.122 2393.88,911.08 2396.19,850.526 2398.49,933.796 2400.8,832.888 2403.11,793.936 2405.42,819.897 2407.73,818.859 2410.03,904.741 2412.34,985.161 2414.65,914.541 2416.96,857.671 2419.27,1025.2 2421.57,1056.67 2423.88,1015.08 2426.19,1030.8 2428.5,751.455 2430.81,849.226 2433.11,1020.77 2435.42,844.813 2437.73,901.768 2440.04,936.9 2442.34,870.028 2444.65,722.967 2446.96,809.487 2449.27,976.818 2451.58,912.296 2453.88,778.911 2456.19,811.992 2458.5,769.306 2460.81,936.875 2463.12,755.239 2465.42,893.703 2467.73,773.04 2470.04,716.838 2472.35,909.963 2474.66,965.635 2476.96,842.291 2479.27,832.962 2481.58,1096.33 2483.89,812.107 2486.2,980.358 2488.5,903.103 2490.81,827.702 2493.12,966.561 2495.43,979.853 2497.73,889.338 2500.04,1047.69 2502.35,907.376 2504.66,957.646 2506.97,922.809 2509.27,886.985 2511.58,959.672 2513.89,915.732 2516.2,788.837 2518.51,947.43 2520.81,837.302 2523.12,1006.46 2525.43,965.218 2527.74,840.569 2530.05,886.803 2532.35,956.605 2534.66,838.434 2536.97,828.045 2539.28,747.592 2541.58,900.15 2543.89,981.001 2546.2,848.655 2548.51,859 2550.82,1102.36 2553.12,876.485 2555.43,898.452 2557.74,910.554 2560.05,988.74 2562.36,905.68 2564.66,1033.52 2566.97,791.258 2569.28,879.083 2571.59,896.961 "></polyline>
<polyline clip-path="url(#clip452)" style="stroke:#3da44d; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:0.5; fill:none" points="265.984,670.017 268.292,325.865 270.6,174.607 272.908,358.267 275.216,365.468 277.524,691.312 279.832,419.636 282.139,394.931 284.447,495.938 286.755,426.997 289.063,381.031 291.371,355.241 293.679,411.762 295.987,436.17 298.295,546.756 300.603,281.877 302.911,408.107 305.219,283.467 307.527,308.054 309.834,273.46 312.142,466.71 314.45,395.978 316.758,390.14 319.066,423.847 321.374,368.497 323.682,396.322 325.99,429.789 328.298,572.278 330.606,318.165 332.914,326.481 335.221,361.683 337.529,501.819 339.837,363.573 342.145,485.494 344.453,372.063 346.761,269.725 349.069,432.021 351.377,419.653 353.685,557.357 355.993,223.76 358.301,416.033 360.608,445.851 362.916,413.444 365.224,361.449 367.532,391.315 369.84,530.889 372.148,572.377 374.456,537.988 376.764,410.731 379.072,476.553 381.38,309.912 383.688,405.51 385.996,370.62 388.303,400.865 390.611,364.571 392.919,526.389 395.227,379.571 397.535,300.304 399.843,282.885 402.151,616.753 404.459,531.462 406.767,409.258 409.075,462.7 411.383,445.193 413.69,512.382 415.998,199.093 418.306,353.168 420.614,267.106 422.922,487.89 425.23,477.89 427.538,478.16 429.846,473.557 432.154,501.07 434.462,355.513 436.77,508.754 439.077,383.695 441.385,532.934 443.693,258.713 446.001,492.812 448.309,217.704 450.617,399.014 452.925,382.804 455.233,346.577 457.541,563.691 459.849,463.276 462.157,444.495 464.465,478.741 466.772,630.592 469.08,482.093 471.388,515.767 473.696,496.46 476.004,353.209 478.312,505.391 480.62,421.309 482.928,397.711 485.236,502.511 487.544,452.267 489.852,275.833 492.159,432.031 494.467,301.955 496.775,404.787 499.083,485.627 501.391,221.479 503.699,570.907 506.007,201.129 508.315,417.583 510.623,452.104 512.931,521.86 515.239,288.388 517.546,383.408 519.854,523.017 522.162,554.474 524.47,354.356 526.778,274.916 529.086,410.339 531.394,262.341 533.702,363.06 536.01,530.857 538.318,313.239 540.626,436.601 542.933,174.114 545.241,525.949 547.549,379.268 549.857,226.651 552.165,406.967 554.473,444.933 556.781,351.544 559.089,477.276 561.397,407.815 563.705,285.532 566.013,417.386 568.321,413.612 570.628,285.943 572.936,573.766 575.244,583.064 577.552,327.538 579.86,405.293 582.168,306.244 584.476,405.633 586.784,541.841 589.092,348.283 591.4,300.237 593.708,296.493 596.015,323.174 598.323,591.207 600.631,378.874 602.939,368.844 605.247,202.72 607.555,479.557 609.863,445.556 612.171,500.527 614.479,445.989 616.787,352.664 619.095,476.316 621.402,426.229 623.71,477.157 626.018,456.206 628.326,225.078 630.634,332.28 632.942,365.597 635.25,379.158 637.558,424.158 639.866,413.567 642.174,333.676 644.482,242.978 646.79,389.252 649.097,438.687 651.405,353.516 653.713,385.434 656.021,577.853 658.329,476.452 660.637,482.225 662.945,360.786 665.253,278.743 667.561,380.357 669.869,372.365 672.177,414.843 674.484,481.029 676.792,486.872 679.1,405.729 681.408,435.067 683.716,388.079 686.024,444.94 688.332,296.007 690.64,308.594 692.948,479.211 695.256,473.952 697.564,535.586 699.871,205.956 702.179,447.425 704.487,267.452 706.795,469.034 709.103,373.392 711.411,403.134 713.719,591.614 716.027,536.109 718.335,488.76 720.643,301.247 722.951,450.084 725.259,334.309 727.566,443.532 729.874,374.598 732.182,271.49 734.49,498.767 736.798,427.634 739.106,460.096 741.414,584.407 743.722,399.463 746.03,301.801 748.338,394.321 750.646,325.135 752.953,354.668 755.261,524.194 757.569,401.925 759.877,199.417 762.185,505.303 764.493,283.026 766.801,581.451 769.109,497.655 771.417,417.612 773.725,574.483 776.033,463.83 778.34,649.979 780.648,480.634 782.956,407.62 785.264,291.318 787.572,336.23 789.88,548.269 792.188,505.697 794.496,509.615 796.804,548.027 799.112,333.116 801.42,387.565 803.728,448.395 806.035,327.653 808.343,316.404 810.651,380.643 812.959,381.834 815.267,484.971 817.575,349.009 819.883,443.759 822.191,360.819 824.499,215.96 826.807,324.747 829.115,373.783 831.422,343.708 833.73,398.2 836.038,568.205 838.346,364.297 840.654,440.73 842.962,434.721 845.27,367.256 847.578,466.529 849.886,439.061 852.194,394.596 854.502,350.038 856.809,459.374 859.117,508.772 861.425,463.663 863.733,435.231 866.041,358.694 868.349,385.004 870.657,487.337 872.965,331.866 875.273,410.434 877.581,687.861 879.889,477.694 882.197,383.178 884.504,359.668 886.812,493.883 889.12,491.948 891.428,223.501 893.736,405.93 896.044,455.761 898.352,457.053 900.66,308.508 902.968,263.176 905.276,497.4 907.584,490.262 909.891,456.789 912.199,355.913 914.507,479.899 916.815,494.863 919.123,398.067 921.431,583.064 923.739,385.405 926.047,313.163 928.355,227.442 930.663,290.029 932.971,468.5 935.278,639.578 937.586,250.724 939.894,607.658 942.202,533.365 944.51,302.031 946.818,455.513 949.126,288.015 951.434,292.908 953.742,400.593 956.05,483.912 958.358,394.799 960.665,299.304 962.973,424.932 965.281,537.164 967.589,389.534 969.897,378.122 972.205,419.708 974.513,433.43 976.821,283.775 979.129,339.16 981.437,330.143 983.745,517.869 986.053,538.447 988.36,485.933 990.668,374.351 992.976,450.375 995.284,383.758 997.592,411.814 999.9,269.312 1002.21,411.632 1004.52,563.551 1006.82,474.36 1009.13,313.19 1011.44,423.637 1013.75,576.474 1016.06,400.418 1018.36,623.31 1020.67,413.743 1022.98,495.73 1025.29,413.273 1027.59,478.76 1029.9,446.028 1032.21,327.77 1034.52,518.511 1036.83,405.284 1039.13,272.591 1041.44,586.155 1043.75,450.549 1046.06,348.324 1048.37,393.963 1050.67,355.42 1052.98,464.363 1055.29,333.871 1057.6,384.04 1059.91,264.552 1062.21,487.779 1064.52,364.169 1066.83,539.937 1069.14,298.895 1071.45,412.106 1073.75,383.918 1076.06,366.616 1078.37,196.38 1080.68,255.481 1082.98,454.265 1085.29,366.915 1087.6,483.864 1089.91,162.532 1092.22,556.167 1094.52,262.804 1096.83,242.443 1099.14,344.265 1101.45,374.852 1103.76,416.016 1106.06,459.412 1108.37,323.624 1110.68,347.65 1112.99,367.253 1115.3,626.832 1117.6,464.997 1119.91,278.315 1122.22,397.328 1124.53,255.122 1126.84,410.097 1129.14,338.599 1131.45,370.21 1133.76,355.277 1136.07,485.991 1138.37,476.604 1140.68,296.437 1142.99,371.982 1145.3,542.354 1147.61,361.066 1149.91,609.904 1152.22,447.157 1154.53,406.691 1156.84,280.355 1159.15,422.519 1161.45,293.734 1163.76,525.041 1166.07,415.046 1168.38,394.975 1170.69,568.173 1172.99,277.008 1175.3,402.677 1177.61,312.568 1179.92,488.104 1182.23,334.952 1184.53,459.079 1186.84,511.091 1189.15,659.08 1191.46,328.493 1193.76,482.15 1196.07,546.801 1198.38,520.204 1200.69,436.422 1203,346.945 1205.3,511.988 1207.61,321.248 1209.92,394.928 1212.23,466.205 1214.54,459.916 1216.84,278.301 1219.15,532.802 1221.46,344.811 1223.77,182.803 1226.08,390.624 1228.38,244.41 1230.69,279.236 1233,288.279 1235.31,400.164 1237.61,523.249 1239.92,267.288 1242.23,316.007 1244.54,478.233 1246.85,430.291 1249.15,369.565 1251.46,513.301 1253.77,389.767 1256.08,430.144 1258.39,433.406 1260.69,430.625 1263,438.078 1265.31,432.122 1267.62,400.635 1269.93,509.799 1272.23,312.961 1274.54,496.414 1276.85,314.631 1279.16,378.69 1281.47,492.22 1283.77,364.259 1286.08,350.548 1288.39,445.512 1290.7,491.36 1293,466.001 1295.31,547.781 1297.62,389.61 1299.93,343.605 1302.24,415.814 1304.54,359.318 1306.85,513.044 1309.16,303.983 1311.47,386.476 1313.78,565.118 1316.08,655.446 1318.39,347.187 1320.7,294.549 1323.01,480.853 1325.32,382.677 1327.62,347.704 1329.93,330.483 1332.24,397.04 1334.55,477.791 1336.86,419.286 1339.16,514.447 1341.47,465.429 1343.78,570.082 1346.09,433.86 1348.39,325.481 1350.7,359.98 1353.01,333.319 1355.32,587.03 1357.63,333.068 1359.93,246.48 1362.24,392.344 1364.55,387.181 1366.86,556.92 1369.17,666.033 1371.47,390.055 1373.78,132.104 1376.09,359.988 1378.4,371.93 1380.71,524.153 1383.01,292.06 1385.32,414.836 1387.63,192.039 1389.94,425.807 1392.24,435.554 1394.55,417.601 1396.86,308.209 1399.17,404.049 1401.48,307.305 1403.78,290.19 1406.09,352.834 1408.4,475.441 1410.71,464.505 1413.02,349.04 1415.32,462.748 1417.63,294.987 1419.94,444.144 1422.25,280.576 1424.56,619.677 1426.86,479.777 1429.17,505.005 1431.48,164.581 1433.79,333.538 1436.1,322.486 1438.4,532.214 1440.71,627.586 1443.02,565.225 1445.33,494.27 1447.63,351.058 1449.94,299.123 1452.25,431.594 1454.56,481.348 1456.87,414.783 1459.17,348.954 1461.48,349.94 1463.79,245.398 1466.1,459.065 1468.41,445.704 1470.71,275.53 1473.02,516.405 1475.33,270.06 1477.64,337.624 1479.95,363.906 1482.25,349.807 1484.56,395.648 1486.87,501.018 1489.18,123.783 1491.49,539.885 1493.79,528.58 1496.1,588.672 1498.41,524.134 1500.72,440.739 1503.02,490.517 1505.33,338.448 1507.64,474.622 1509.95,254.636 1512.26,462.964 1514.56,315.946 1516.87,395.905 1519.18,543.921 1521.49,572.191 1523.8,371.17 1526.1,366.334 1528.41,424.389 1530.72,488.862 1533.03,388.052 1535.34,425.615 1537.64,258.913 1539.95,465.935 1542.26,174.7 1544.57,390.786 1546.88,587.156 1549.18,399.276 1551.49,241.083 1553.8,317.185 1556.11,393.838 1558.41,365.013 1560.72,645.747 1563.03,593.114 1565.34,283.915 1567.65,615.206 1569.95,317.048 1572.26,455.314 1574.57,375.345 1576.88,330.003 1579.19,519.787 1581.49,515.221 1583.8,317.548 1586.11,486.194 1588.42,465.336 1590.73,424.166 1593.03,245.794 1595.34,322.609 1597.65,198.214 1599.96,339.314 1602.26,440.931 1604.57,531.369 1606.88,369.402 1609.19,504.716 1611.5,282.567 1613.8,451.657 1616.11,290.435 1618.42,544.813 1620.73,517.47 1623.04,489.312 1625.34,428.279 1627.65,297.272 1629.96,532.558 1632.27,513.436 1634.58,527.074 1636.88,403.946 1639.19,425.103 1641.5,463.629 1643.81,259.095 1646.12,485.894 1648.42,331.946 1650.73,406.6 1653.04,247.75 1655.35,269.037 1657.65,371.324 1659.96,338.835 1662.27,586.674 1664.58,258.532 1666.89,539.803 1669.19,507.743 1671.5,645.596 1673.81,363.255 1676.12,269.328 1678.43,397.249 1680.73,378.312 1683.04,355.124 1685.35,404.812 1687.66,442.385 1689.97,448.222 1692.27,400.747 1694.58,411.307 1696.89,597.102 1699.2,396.723 1701.51,546.444 1703.81,507.027 1706.12,579.234 1708.43,496.678 1710.74,456.335 1713.04,437.56 1715.35,478.54 1717.66,379.842 1719.97,586.917 1722.28,248.207 1724.58,344.268 1726.89,519.726 1729.2,576.097 1731.51,451.842 1733.82,598.362 1736.12,475.784 1738.43,457.747 1740.74,430.989 1743.05,393.649 1745.36,509.711 1747.66,399.777 1749.97,641.113 1752.28,305.391 1754.59,456.753 1756.9,540.798 1759.2,346.29 1761.51,423.295 1763.82,381.951 1766.13,427.818 1768.43,490.198 1770.74,559.288 1773.05,386.411 1775.36,291.059 1777.67,595.377 1779.97,528.936 1782.28,415.908 1784.59,419.701 1786.9,298.51 1789.21,464.909 1791.51,415.107 1793.82,446.696 1796.13,386.353 1798.44,298.158 1800.75,324.84 1803.05,272.977 1805.36,509.449 1807.67,327.511 1809.98,387.056 1812.28,295.021 1814.59,386.65 1816.9,455.408 1819.21,488.433 1821.52,393.499 1823.82,637.378 1826.13,484.021 1828.44,512.92 1830.75,468.929 1833.06,469.521 1835.36,226.289 1837.67,496.095 1839.98,522.626 1842.29,271.256 1844.6,474.349 1846.9,387.236 1849.21,469.112 1851.52,286.744 1853.83,299.691 1856.14,383.533 1858.44,250.549 1860.75,247.316 1863.06,392.542 1865.37,313.52 1867.67,458.976 1869.98,467.068 1872.29,410.471 1874.6,349.211 1876.91,277.486 1879.21,454.901 1881.52,239.116 1883.83,394.661 1886.14,311.01 1888.45,358.4 1890.75,467.368 1893.06,328.856 1895.37,358.649 1897.68,385.705 1899.99,597.602 1902.29,369.328 1904.6,309.633 1906.91,612.545 1909.22,478.699 1911.53,294.174 1913.83,540.795 1916.14,288.904 1918.45,329.2 1920.76,412.641 1923.06,367.808 1925.37,388.791 1927.68,278.58 1929.99,281.335 1932.3,434.017 1934.6,348.89 1936.91,426.749 1939.22,316.246 1941.53,371.878 1943.84,575.128 1946.14,382.16 1948.45,290.991 1950.76,516.63 1953.07,541.732 1955.38,433.462 1957.68,412.375 1959.99,530.273 1962.3,489.768 1964.61,434.49 1966.91,378.337 1969.22,449.25 1971.53,96.8724 1973.84,284.541 1976.15,377.111 1978.45,427.485 1980.76,532.675 1983.07,421.853 1985.38,389.857 1987.69,243.149 1989.99,407.948 1992.3,494.407 1994.61,481.993 1996.92,273.716 1999.23,285.711 2001.53,512.654 2003.84,497.06 2006.15,401.367 2008.46,382.876 2010.77,415.496 2013.07,348.552 2015.38,304.511 2017.69,548.557 2020,316.401 2022.3,464.854 2024.61,334.977 2026.92,574.123 2029.23,342.113 2031.54,493.615 2033.84,307.52 2036.15,551.203 2038.46,450.034 2040.77,627.717 2043.08,484.646 2045.38,296.614 2047.69,376.257 2050,504.352 2052.31,342.157 2054.62,366.733 2056.92,370.559 2059.23,310.746 2061.54,405.738 2063.85,445.533 2066.16,289.111 2068.46,255.737 2070.77,303.382 2073.08,346.601 2075.39,436.983 2077.69,457.759 2080,426.482 2082.31,378.145 2084.62,485.602 2086.93,427.499 2089.23,196.601 2091.54,482.771 2093.85,392.563 2096.16,351.742 2098.47,263.376 2100.77,316.987 2103.08,461.326 2105.39,256.352 2107.7,412.031 2110.01,204.613 2112.31,550.495 2114.62,407.697 2116.93,436.709 2119.24,243.755 2121.55,472.63 2123.85,562.822 2126.16,271.738 2128.47,267.067 2130.78,489.474 2133.08,296.723 2135.39,359.025 2137.7,426.902 2140.01,475.211 2142.32,288.66 2144.62,268.843 2146.93,320.827 2149.24,491.107 2151.55,517.749 2153.86,467.158 2156.16,367.099 2158.47,450.996 2160.78,371.165 2163.09,250.568 2165.4,378.571 2167.7,583.138 2170.01,401.112 2172.32,305.438 2174.63,422.793 2176.93,446.257 2179.24,444.045 2181.55,440.099 2183.86,434.156 2186.17,465.662 2188.47,205.217 2190.78,532.153 2193.09,612.154 2195.4,382.254 2197.71,535.113 2200.01,341.702 2202.32,204.923 2204.63,448.169 2206.94,490.891 2209.25,608.513 2211.55,396.883 2213.86,255.304 2216.17,440.4 2218.48,188.279 2220.79,394.192 2223.09,319.119 2225.4,476.842 2227.71,480.977 2230.02,437.963 2232.32,380.307 2234.63,555.046 2236.94,481.375 2239.25,585.478 2241.56,420.55 2243.86,369.042 2246.17,417.522 2248.48,460.554 2250.79,574.724 2253.1,550.736 2255.4,192.063 2257.71,475.504 2260.02,464.652 2262.33,361.44 2264.64,414.396 2266.94,384.91 2269.25,435.984 2271.56,459.723 2273.87,320.444 2276.18,491.735 2278.48,397.729 2280.79,479.392 2283.1,418.654 2285.41,385.715 2287.71,302.743 2290.02,354.131 2292.33,575.041 2294.64,229.667 2296.95,430.664 2299.25,381.153 2301.56,281.032 2303.87,625.81 2306.18,235.665 2308.49,456.17 2310.79,435.264 2313.1,302.974 2315.41,390.169 2317.72,361.614 2320.03,330.637 2322.33,454.451 2324.64,369.01 2326.95,345.201 2329.26,552.845 2331.56,264.94 2333.87,177.679 2336.18,273.739 2338.49,487.141 2340.8,322.652 2343.1,249.938 2345.41,398.659 2347.72,432.496 2350.03,423.894 2352.34,404.541 2354.64,393.196 2356.95,189.395 2359.26,325.629 2361.57,333.677 2363.88,418.101 2366.18,253.384 2368.49,550.93 2370.8,450.661 2373.11,319.747 2375.42,396.746 2377.72,318.614 2380.03,493.322 2382.34,274.428 2384.65,352.608 2386.95,607.534 2389.26,367.674 2391.57,334.155 2393.88,233.949 2396.19,547.463 2398.49,469.024 2400.8,581.656 2403.11,359.629 2405.42,414.25 2407.73,377.488 2410.03,330.872 2412.34,305.077 2414.65,330.134 2416.96,225.944 2419.27,397.761 2421.57,483.919 2423.88,484.791 2426.19,344.677 2428.5,474.214 2430.81,609.087 2433.11,366.116 2435.42,514.928 2437.73,299.538 2440.04,527.777 2442.34,309.777 2444.65,235.205 2446.96,245.565 2449.27,534.111 2451.58,255.24 2453.88,382.394 2456.19,349.253 2458.5,341.553 2460.81,168.813 2463.12,379.454 2465.42,334.69 2467.73,558.743 2470.04,418.987 2472.35,302.965 2474.66,550.369 2476.96,267.218 2479.27,529.059 2481.58,542.581 2483.89,440.483 2486.2,325.176 2488.5,259.824 2490.81,400.919 2493.12,562.126 2495.43,545.507 2497.73,329.707 2500.04,390.619 2502.35,349.95 2504.66,324.718 2506.97,442.52 2509.27,479.012 2511.58,385.354 2513.89,293.907 2516.2,370.786 2518.51,560.928 2520.81,481.248 2523.12,382.707 2525.43,521.141 2527.74,427.164 2530.05,450.496 2532.35,464.13 2534.66,460.484 2536.97,530.804 2539.28,357.532 2541.58,337.027 2543.89,435.769 2546.2,341.412 2548.51,381.812 2550.82,358.081 2553.12,365.656 2555.43,470.258 2557.74,498.521 2560.05,288.078 2562.36,256.812 2564.66,468.739 2566.97,417.753 2569.28,453.023 2571.59,407.703 "></polyline>
</svg>
</div>
</div>
<p>Look at that! Things are working; amazin’.</p>
<p>We can also exploit <a href="https://github.com/TuringLang/AbstractMCMC.jl">AbstractMCMC.jl</a>’s parallel sampling capabilities:</p>
<div id="34" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run separate 4 chains for 10 000 iterations using threads to parallelize.</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>num_chains <span class="op">=</span> <span class="fl">4</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>samples <span class="op">=</span> <span class="fu">sample</span>(</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    model_with_grad,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    sampler,</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">MCMCThreads</span>(),</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="fl">10_000</span>,</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    num_chains;</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Note we need to provide an initial state for every chain.</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    initial_state<span class="op">=</span><span class="fu">fill</span>(state, num_chains),</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    progress<span class="op">=</span><span class="cn">false</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>samples_array <span class="op">=</span> <span class="fu">stack</span>(<span class="fu">map</span>(<span class="bu">Base</span>.<span class="fu">Fix1</span>(stack, sample <span class="op">-&gt;</span> sample.x), samples))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3×10000×4 Array{Float64, 3}:
[:, :, 1] =
 -2.29538   -3.33131   -6.7956     …  -5.09067   -3.03761   -2.54002
 -0.270843   0.826161  -0.0879173     -0.144121   0.318727   1.26235
  3.39566    2.7985     3.53167        5.24098    5.86226    7.2062

[:, :, 2] =
 -4.00789   -4.00789   -3.85368  -4.69897  …  -6.32586   -6.32586   -6.6734
 -2.09813   -2.09813    1.03182   1.07218      0.465713   0.465713   0.598183
  0.640692   0.640692   4.77483   4.85192      4.90074    4.90074    4.91199

[:, :, 3] =
 -3.38187  -5.42234  -6.6748    -5.34511   …  -4.00014  -4.87523   -7.37154
 -1.82473  -1.1774   -0.546356  -0.438123      1.30048  -0.750945  -0.0656413
  3.8806    4.87897   4.04912    3.87572       4.8168    5.08066    5.73118

[:, :, 4] =
 -1.80342   -3.69883  -4.69089   …  -5.88026   -4.34813   -4.20292
 -0.248749   1.51804  -0.348921      0.499341   0.704917   0.0795689
  3.04979    4.91366   5.47652       7.13322    6.41131    6.73998</code></pre>
</div>
</div>
<p>But the fact that we have to provide the <code>AbstractMCMC.sample</code> call, etc. with an <code>initial_state</code> to get started is a bit annoying. We can avoid this by also defining a <code>AbstractMCMC.step</code> <em>without</em> the <code>state</code> argument:</p>
<div id="36" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> AbstractMCMC.<span class="fu">step</span>(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    rng<span class="op">::</span><span class="dt">Random.AbstractRNG</span>,</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    model_wrapper<span class="op">::</span><span class="dt">AbstractMCMC.LogDensityModel</span>,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">::</span><span class="dt">MALA</span>;</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span><span class="al">NOTE</span><span class="co">: No state provided!</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    kwargs<span class="op">...</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> model_wrapper.logdensity</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Let's just create the initial state by sampling using  a Gaussian.</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="fu">randn</span>(rng, LogDensityProblems.<span class="fu">dimension</span>(model))</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">MALASample</span>(x), <span class="fu">MALAState</span>(x)</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Equipped with this, we no longer need to provide the <code>initial_state</code> everywhere:</p>
<div id="38" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>samples <span class="op">=</span> <span class="fu">sample</span>(model_with_grad, sampler, <span class="fl">10_000</span>; progress<span class="op">=</span><span class="cn">false</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>samples_matrix <span class="op">=</span> <span class="fu">stack</span>(sample <span class="op">-&gt;</span> sample.x, samples)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">hcat</span>(<span class="fu">mean</span>(samples_matrix; dims<span class="op">=</span><span class="fl">2</span>), <span class="fu">std</span>(samples_matrix; dims<span class="op">=</span><span class="fl">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3×2 Matrix{Float64}:
 -5.01346    1.01754
 -0.0156698  1.00487
  5.0065     1.00459</code></pre>
</div>
</div>
</section>
<section id="using-our-sampler-with-turing.jl" class="level2">
<h2 class="anchored" data-anchor-id="using-our-sampler-with-turing.jl">Using our sampler with Turing.jl</h2>
<p>As we promised, all of this hassle of implementing our <code>MALA</code> sampler in a way that uses <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a> and <a href="https://github.com/TuringLang/AbstractMCMC.jl">AbstractMCMC.jl</a> gets us something more than <em>just</em> an “automatic” implementation of <code>AbstractMCMC.sample</code>.</p>
<p>It also enables use with Turing.jl through the <code>externalsampler</code>, but we need to do one final thing first: we need to tell Turing.jl how to extract a vector of parameters from the “sample” returned in our implementation of <code>AbstractMCMC.step</code>. In our case, the “sample” is a <code>MALASample</code>, so we just need the following line:</p>
<div id="40" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load Turing.jl.</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Turing</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Overload the `getparams` method for our "sample" type, which is just a vector.</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>Turing.Inference.<span class="fu">getparams</span>(<span class="op">::</span><span class="dt">Turing.Model</span>, sample<span class="op">::</span><span class="dt">MALASample</span>) <span class="op">=</span> sample.x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And with that, we’re good to go!</p>
<div id="42" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Our previous model defined as a Turing.jl model.</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="pp">@model</span> <span class="fu">mvnormal_model</span>() <span class="op">=</span> x <span class="op">~</span> <span class="fu">MvNormal</span>([<span class="op">-</span><span class="fl">5</span>., <span class="fl">0</span>., <span class="fl">5</span>.], I)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Instantiate our model.</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>turing_model <span class="op">=</span> <span class="fu">mvnormal_model</span>()</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Call `sample` but now we're passing in a Turing.jl `model` and wrapping</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co"># our `MALA` sampler in the `externalsampler` to tell Turing.jl that the sampler</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="co"># expects something that implements LogDensityProblems.jl.</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>chain <span class="op">=</span> <span class="fu">sample</span>(turing_model, <span class="fu">externalsampler</span>(sampler), <span class="fl">10_000</span>; progress<span class="op">=</span><span class="cn">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>Chains MCMC chain (10000×4×1 Array{Float64, 3}):

Iterations        = 1:1:10000
Number of chains  = 1
Samples per chain = 10000
Wall duration     = 2.57 seconds
Compute duration  = 2.57 seconds
parameters        = x[1], x[2], x[3]
internals         = lp

Summary Statistics
  parameters      mean       std      mcse    ess_bulk    ess_tail      rhat   ⋯
      Symbol   Float64   Float64   Float64     Float64     Float64   Float64   ⋯

        x[1]   -5.0056    1.0131    0.0175   3353.7500   5178.5848    1.0003   ⋯
        x[2]    0.0033    0.9922    0.0166   3581.5212   5407.0031    1.0003   ⋯
        x[3]    4.9966    0.9972    0.0173   3325.8896   5016.4919    1.0004   ⋯
                                                                1 column omitted

Quantiles
  parameters      2.5%     25.0%     50.0%     75.0%     97.5%
      Symbol   Float64   Float64   Float64   Float64   Float64

        x[1]   -6.9621   -5.6835   -4.9993   -4.3294   -3.0332
        x[2]   -1.9532   -0.6692    0.0097    0.6892    1.9245
        x[3]    3.0318    4.3212    4.9894    5.6785    6.9183</code></pre>
</div>
</div>
<p>Pretty neat, eh?</p>
<section id="models-with-constrained-parameters" class="level3">
<h3 class="anchored" data-anchor-id="models-with-constrained-parameters">Models with constrained parameters</h3>
<p>One thing we’ve sort of glossed over in all of the above is that MALA, at least how we’ve implemented it, requires <span class="math inline">\(x\)</span> to live in <span class="math inline">\(\mathbb{R}^d\)</span> for some <span class="math inline">\(d &gt; 0\)</span>. If some of the parameters were in fact constrained, e.g.&nbsp;we were working with a <code>Beta</code> distribution which has support on the interval <span class="math inline">\((0, 1)\)</span>, <em>not</em> on <span class="math inline">\(\mathbb{R}^d\)</span>, we could easily end up outside of the valid range <span class="math inline">\((0, 1)\)</span>.</p>
<div id="44" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@model</span> <span class="fu">beta_model</span>() <span class="op">=</span> x <span class="op">~</span> <span class="fu">Beta</span>(<span class="fl">3</span>, <span class="fl">3</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>turing_model <span class="op">=</span> <span class="fu">beta_model</span>()</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>chain <span class="op">=</span> <span class="fu">sample</span>(turing_model, <span class="fu">externalsampler</span>(sampler), <span class="fl">10_000</span>; progress<span class="op">=</span><span class="cn">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>Chains MCMC chain (10000×2×1 Array{Float64, 3}):

Iterations        = 1:1:10000
Number of chains  = 1
Samples per chain = 10000
Wall duration     = 1.69 seconds
Compute duration  = 1.69 seconds
parameters        = x
internals         = lp

Summary Statistics
  parameters      mean       std      mcse    ess_bulk    ess_tail      rhat   ⋯
      Symbol   Float64   Float64   Float64     Float64     Float64   Float64   ⋯

           x    0.4956    0.1878    0.0028   4252.7173   5455.7160    1.0000   ⋯
                                                                1 column omitted

Quantiles
  parameters      2.5%     25.0%     50.0%     75.0%     97.5%
      Symbol   Float64   Float64   Float64   Float64   Float64

           x    0.1402    0.3577    0.4913    0.6350    0.8493</code></pre>
</div>
</div>
<p>Yep, that still works, but only because Turing.jl actually <em>transforms</em> the <code>turing_model</code> from constrained to unconstrained, so that the <code>sampler</code> provided to <code>externalsampler</code> is actually always working in unconstrained space! This is not always desirable, so we can turn this off:</p>
<div id="46" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>chain <span class="op">=</span> <span class="fu">sample</span>(turing_model, <span class="fu">externalsampler</span>(sampler; unconstrained<span class="op">=</span><span class="cn">false</span>), <span class="fl">10_000</span>; progress<span class="op">=</span><span class="cn">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>Chains MCMC chain (10000×2×1 Array{Float64, 3}):

Iterations        = 1:1:10000
Number of chains  = 1
Samples per chain = 10000
Wall duration     = 0.24 seconds
Compute duration  = 0.24 seconds
parameters        = x
internals         = lp

Summary Statistics
  parameters      mean       std      mcse    ess_bulk    ess_tail      rhat   ⋯
      Symbol   Float64   Float64   Float64     Float64     Float64   Float64   ⋯

           x    0.0534    0.0397    0.0010   1543.6625   1543.6625    1.0005   ⋯
                                                                1 column omitted

Quantiles
  parameters      2.5%     25.0%     50.0%     75.0%     97.5%
      Symbol   Float64   Float64   Float64   Float64   Float64

           x    0.0524    0.0524    0.0524    0.0524    0.0524</code></pre>
</div>
</div>
<p>The fun thing is that this still sort of works because</p>
<div id="48" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">logpdf</span>(<span class="fu">Beta</span>(<span class="fl">3</span>, <span class="fl">3</span>), <span class="fl">10.0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>-Inf</code></pre>
</div>
</div>
<p>and so the samples that fall outside of the range are always rejected. But do notice how much worse all the diagnostics are, e.g.&nbsp;<code>ess_tail</code> is very poor compared to when we use <code>unconstrained=true</code>. Moreover, in more complex cases this won’t just result in a “nice” <code>-Inf</code> log-density value, but instead will error:</p>
<div id="50" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@model</span> <span class="kw">function</span> <span class="fu">demo</span>()</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    σ² <span class="op">~</span> <span class="fu">truncated</span>(<span class="fu">Normal</span>(), lower<span class="op">=</span><span class="fl">0</span>)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If we end up with negative values for `σ²`, the `Normal` will error.</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    x <span class="op">~</span> <span class="fu">Normal</span>(<span class="fl">0</span>, σ²)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="fu">demo</span>(), <span class="fu">externalsampler</span>(sampler; unconstrained<span class="op">=</span><span class="cn">false</span>), <span class="fl">10_000</span>; progress<span class="op">=</span><span class="cn">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>Chains MCMC chain (10000×3×1 Array{Float64, 3}):

Iterations        = 1:1:10000
Number of chains  = 1
Samples per chain = 10000
Wall duration     = 2.63 seconds
Compute duration  = 2.63 seconds
parameters        = σ², x
internals         = lp

Summary Statistics
  parameters      mean       std      mcse   ess_bulk   ess_tail      rhat   e ⋯
      Symbol   Float64   Float64   Float64    Float64    Float64   Float64     ⋯

          σ²    0.0889    0.0000    0.0000        NaN        NaN       NaN     ⋯
           x   -1.0043    0.0000       NaN        NaN        NaN       NaN     ⋯
                                                                1 column omitted

Quantiles
  parameters      2.5%     25.0%     50.0%     75.0%     97.5%
      Symbol   Float64   Float64   Float64   Float64   Float64

          σ²    0.0889    0.0889    0.0889    0.0889    0.0889
           x   -1.0043   -1.0043   -1.0043   -1.0043   -1.0043</code></pre>
</div>
</div>
<p>As expected, we run into a <code>DomainError</code> at some point, while if we set <code>unconstrained=true</code>, letting Turing.jl transform the model to a unconstrained form behind the scenes, everything works as expected:</p>
<div id="52" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="fu">demo</span>(), <span class="fu">externalsampler</span>(sampler; unconstrained<span class="op">=</span><span class="cn">true</span>), <span class="fl">10_000</span>; progress<span class="op">=</span><span class="cn">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>Chains MCMC chain (10000×3×1 Array{Float64, 3}):

Iterations        = 1:1:10000
Number of chains  = 1
Samples per chain = 10000
Wall duration     = 0.56 seconds
Compute duration  = 0.56 seconds
parameters        = σ², x
internals         = lp

Summary Statistics
  parameters      mean       std      mcse   ess_bulk   ess_tail      rhat   e ⋯
      Symbol   Float64   Float64   Float64    Float64    Float64   Float64     ⋯

          σ²    0.9622    0.7267    0.0912   117.4045    36.5234    1.0143     ⋯
           x    0.0656    1.0170    0.0711   233.2886   317.2178    1.0106     ⋯
                                                                1 column omitted

Quantiles
  parameters      2.5%     25.0%     50.0%     75.0%     97.5%
      Symbol   Float64   Float64   Float64   Float64   Float64

          σ²    0.0947    0.4691    0.7540    1.2626    3.3153
           x   -1.8625   -0.5003   -0.0206    0.4914    2.4780</code></pre>
</div>
</div>
<p>Neat!</p>
<p>Similarly, which automatic differentiation backend one should use can be specified through the <code>adtype</code> keyword argument too. For example, if we want to use <a href="https://github.com/JuliaDiff/ReverseDiff.jl">ReverseDiff.jl</a> instead of the default <a href="https://github.com/JuliaDiff/ForwardDiff.jl">ForwardDiff.jl</a>:</p>
<div id="54" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">ReverseDiff</span>: ReverseDiff</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify that we want to use `AutoReverseDiff`.</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">demo</span>(),</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">externalsampler</span>(sampler; unconstrained<span class="op">=</span><span class="cn">true</span>, adtype<span class="op">=</span><span class="fu">AutoReverseDiff</span>()),</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>    <span class="fl">10_000</span>;</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    progress<span class="op">=</span><span class="cn">false</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>Chains MCMC chain (10000×3×1 Array{Float64, 3}):

Iterations        = 1:1:10000
Number of chains  = 1
Samples per chain = 10000
Wall duration     = 3.03 seconds
Compute duration  = 3.03 seconds
parameters        = σ², x
internals         = lp

Summary Statistics
  parameters      mean       std      mcse   ess_bulk   ess_tail      rhat   e ⋯
      Symbol   Float64   Float64   Float64    Float64    Float64   Float64     ⋯

          σ²    0.8069    0.5954    0.0497    77.0173    26.6327    1.0064     ⋯
           x   -0.0237    1.0011    0.0694   423.1714   235.2532    1.0004     ⋯
                                                                1 column omitted

Quantiles
  parameters      2.5%     25.0%     50.0%     75.0%     97.5%
      Symbol   Float64   Float64   Float64   Float64   Float64

          σ²    0.0980    0.3075    0.6932    1.1610    2.2426
           x   -2.1895   -0.3406    0.0483    0.3753    1.9091</code></pre>
</div>
</div>
<p>Double-neat.</p>
</section>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<p>At this point it’s worth maybe reminding ourselves what we did and also <em>why</em> we did it:</p>
<ol type="1">
<li>We define our models in the <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a> interface because it makes the sampler agnostic to how the underlying model is implemented.</li>
<li>We implement our sampler in the <a href="https://github.com/TuringLang/AbstractMCMC.jl">AbstractMCMC.jl</a> interface, which just means that our sampler is a subtype of <code>AbstractMCMC.AbstractSampler</code> and we implement the MCMC transition in <code>AbstractMCMC.step</code>.</li>
<li>Points 1 and 2 makes it so our sampler can be used with a wide range of model implementations, amongst them being models implemented in both Turing.jl and Stan. This gives you, the inference implementer, a large collection of models to test your inference method on, in addition to allowing users of Turing.jl and Stan to try out your inference method with minimal effort.</li>
</ol>


</section>


<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>We’re going with the leapfrog formulation because in a future version of this tutorial we’ll add a section extending this simple “baseline” MALA sampler to more complex versions. See <a href="https://github.com/TuringLang/docs/issues/479">issue #479</a> for progress on this.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>There is no such thing as a proper interface in Julia (at least not officially), and so we use the word “interface” here to mean a few minimal methods that needs to be implemented by any type that we treat as a target model.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/turinglang\.org\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../tutorials/docs-07-for-developers-variational-inference/index.html" class="pagination-link" aria-label="Variational Inference">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Variational Inference</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Turing is created by <a href="http://mlg.eng.cam.ac.uk/hong/" target="_blank">Hong Ge</a>, and lovingly maintained by the <a href="https://github.com/TuringLang/Turing.jl/graphs/contributors" target="_blank">core team</a> of volunteers. <br> The contents of this website are © 2024 under the terms of the <a href="https://github.com/TuringLang/Turing.jl/blob/master/LICENCE" target="_blank">MIT License</a>.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/TuringLang/docs/edit/master/tutorials/docs-17-implementing-samplers/index.qmd" target="_blank" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/TuringLang/docs/issues/new" target="_blank" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://x.com/TuringLang">
      <i class="bi bi-twitter" role="img" aria-label="Turing Twitter">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/TuringLang/Turing.jl">
      <i class="bi bi-github" role="img" aria-label="Turing GitHub">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>